"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[302],{26930:function(Q,y,e){e.r(y),e.d(y,{SingleSignOn:function(){return n},default:function(){return r}});var t=e(32735),i=e(88425),a=e(66456),x=e(96709),P=e(28356),$=e(17e3),F=e(41415),A=e(27649),B=e(27677),D=e(49372),C=e(9139),W=e(70218),Z=e(84967),L=e(15335),z=e(5803),j=e(5636),k=e(89793),H=e.n(k),G=e(64421),b=e(8888),M=e(72041),g=e(5173),J=g.Ry().shape({autoRegister:g.Xg().required(i.translatedErrors.required),defaultRole:g.nK().when("autoRegister",(l,o)=>l?o.required(i.translatedErrors.required):o.nullable())});const h={...M.Z.settings.sso,readRoles:M.Z.settings.roles.read},n=()=>{const{formatMessage:l}=(0,j.useIntl)(),{isLoading:o,allowedActions:{canUpdate:d,canReadRoles:E}}=(0,i.useRBAC)(h),[{formErrors:c,initialData:S,isLoading:p,modifiedData:f,showHeaderButtonLoader:m},O,{handleChange:v,handleSubmit:T}]=(0,b.G4)((0,G.IF)("providers/options"),J,()=>{},["autoRegister","defaultRole"]),{roles:K}=(0,b.bF)(E);(0,i.useFocusWhenNavigate)();const N=o||p;(0,t.useEffect)(()=>{if(c.defaultRole){const s='[name="defaultRole"]';document.querySelector(s).focus()}},[c]);const I=H()(S,f);return t.createElement(x.A,null,t.createElement(i.SettingsPageTitle,{name:"SSO"}),t.createElement(A.o,{tabIndex:-1},t.createElement("form",{onSubmit:s=>{if(I){s.preventDefault();return}T(s)}},t.createElement(P.T,{primaryAction:t.createElement(F.z,{"data-testid":"save-button",disabled:I,loading:m,startIcon:t.createElement(a.Z,null),type:"submit",size:"L"},l({id:"global.save",defaultMessage:"Save"})),title:l({id:"Settings.sso.title",defaultMessage:"Single Sign-On"}),subtitle:l({id:"Settings.sso.description",defaultMessage:"Configure the settings for the Single Sign-On feature."})}),t.createElement($.D,null,N?t.createElement(i.LoadingIndicatorPage,null):t.createElement(B.K,{spacing:4,background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},t.createElement(D.Z,{variant:"delta",as:"h2"},l({id:"global.settings",defaultMessage:"Settings"})),t.createElement(L.r,{gap:4},t.createElement(z.P,{col:6,m:6,s:12},t.createElement(C.s,{"aria-label":"autoRegister","data-testid":"autoRegister",disabled:!d,checked:f.autoRegister,hint:l({id:"Settings.sso.form.registration.description",defaultMessage:"Create new user on SSO login if no account exists"}),label:l({id:"Settings.sso.form.registration.label",defaultMessage:"Auto-registration"}),name:"autoRegister",offLabel:l({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:l({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:s=>{v({target:{name:"autoRegister",value:s.target.checked}})}})),t.createElement(z.P,{col:6,m:6,s:12},t.createElement(W.P,{disabled:!d,hint:l({id:"Settings.sso.form.defaultRole.description",defaultMessage:"It will attach the new authenticated user to the selected role"}),error:c.defaultRole?l({id:c.defaultRole.id,defaultMessage:c.defaultRole.id}):"",label:l({id:"Settings.sso.form.defaultRole.label",defaultMessage:"Default role"}),name:"defaultRole",onChange:s=>{v({target:{name:"defaultRole",value:s}})},placeholder:l({id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"}),value:f.defaultRole},K.map(({id:s,name:R})=>t.createElement(Z.W,{key:s,value:s.toString()},R))))))))))};var r=()=>t.createElement(i.CheckPagePermissions,{permissions:h.main},t.createElement(n,null))},9139:function(Q,y,e){e.d(y,{s:function(){return h}});var t=e(32735),i=e(83292),a=e(60216),x=e(78542),P=e(66436),$=e(87107),F=e(76437),A=e(67014),B=e(47851),D=e(27677),C=e(87933),W=e(7563),Z=e(30350),L=e(49372),z=e(3685),j=e(72850),k=e(76144);const H=i.default.label`
  position: relative;
  display: inline-block;
  z-index: 0;
  width: 100%;
`,G=(0,i.default)(j.x)`
  cursor: ${({disabled:n})=>n?"not-allowed":void 0};
  // Masks the background of each value
  overflow: hidden;
  flex-wrap: wrap;

  ${(0,Z.k3)()}
`,b=(0,i.default)(C.k).attrs({hasRadius:!0})`
  background-color: ${({theme:n,checked:u,disabled:r})=>u?r?n.colors.neutral200:n.colors.neutral0:"transparent"};
  border: 1px solid
    ${({theme:n,checked:u,disabled:r})=>u&&u!==null?r?n.colors.neutral300:n.colors.neutral200:r?n.colors.neutral150:n.colors.neutral100};
  position: relative;
  user-select: none;
  z-index: 2;
  flex: 1 1 50%;
  /**
    We declare the defined value because we want the height of the input when 
    the values are in a row to be 40px. But defining a height on the label
    would break the input when it wraps.
  */
  padding-top: ${({size:n})=>`${n==="S"?"2px":"6px"}`};
  padding-bottom: ${({size:n})=>`${n==="S"?"2px":"6px"}`};
`,M=i.default.input`
  height: 100%;
  left: 0;
  opacity: 0;
  position: absolute;
  top: 0;
  z-index: 1;
  width: 100%;
`,g=t.forwardRef(({size:n,onLabel:u,offLabel:r,children:l,checked:o,disabled:d,onChange:E,...c},S)=>{const{error:p,hint:f,id:m,name:O,required:v}=(0,k.U)(),T="neutral600";let K=!o&&o!==null?"danger700":T,N=o?"primary600":T;const I=R=>{d||E(R)};let s;return p?s=`${m}-error`:f&&(s=`${m}-hint`),t.createElement(H,null,t.createElement(z.T,null,l),t.createElement(G,{hasRadius:!0,disabled:d,padding:1,display:"flex",background:d?"neutral150":"neutral100",borderStyle:"solid",borderWidth:"1px",borderColor:"neutral200"},t.createElement(b,{size:n,paddingLeft:3,paddingRight:3,justifyContent:"center",alignItems:"center","aria-hidden":!0,checked:o===null?!1:!o,disabled:d},t.createElement(L.Z,{variant:"pi",fontWeight:"bold",textTransform:"uppercase",textColor:d?"neutral700":K},r)),t.createElement(b,{size:n,paddingLeft:3,paddingRight:3,justifyContent:"center",alignItems:"center","aria-hidden":!0,checked:o===null?!1:o,disabled:d},t.createElement(L.Z,{variant:"pi",fontWeight:"bold",textTransform:"uppercase",textColor:d?"neutral700":N},u)),t.createElement(M,{type:"checkbox","aria-disabled":d,"aria-describedby":s,onChange:R=>I(R),name:O,ref:S,"aria-required":v,...c,checked:!(o===null||!o)})))});g.displayName="ToggleCheckbox",g.defaultProps={disabled:!1,checked:!1,onChange:void 0,size:"M"},g.propTypes={checked:a.bool,children:a.string.isRequired,disabled:a.bool,offLabel:a.string.isRequired,onChange:a.func,onLabel:a.string.isRequired,size:a.oneOf(Object.keys(x.J.input))};const U=(0,i.default)($.g)`
  max-width: 320px;
`,J=(0,i.default)(W.A)`
  align-self: flex-end;
  margin-left: auto;
`,h=({disabled:n,size:u,error:r,hint:l,label:o,name:d,labelAction:E,required:c,id:S,onClear:p,clearLabel:f,checked:m,...O})=>{const v=(0,P.M)(S);return t.createElement(U,{name:d,hint:l,error:r,id:v,required:c},t.createElement(D.K,{spacing:1},t.createElement(C.k,null,t.createElement(F.Q,{action:E},o),f&&p&&m!==null&&!n&&t.createElement(J,{onClick:p},f)),t.createElement(g,{id:v,size:u,checked:m,disabled:n,...O},o),t.createElement(A.J,null),t.createElement(B.c,null)))};h.displayName="ToggleInput",h.defaultProps={checked:!1,clearLabel:void 0,disabled:!1,error:void 0,hint:void 0,id:void 0,label:"",labelAction:void 0,name:"",onClear:void 0,required:!1,size:"M"},h.propTypes={checked:a.bool,clearLabel:a.string,disabled:a.bool,error:a.string,hint:a.oneOfType([a.string,a.node,a.arrayOf(a.node)]),id:a.string,label:a.string,labelAction:a.node,name:a.string,onClear:a.func,required:a.bool,size:a.oneOf(Object.keys(x.J.input))}}}]);
