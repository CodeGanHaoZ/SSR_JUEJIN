"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[695],{67963:function(U,E,t){t.r(E),t.d(E,{SettingsPage:function(){return W},default:function(){return F}});var e=t(32735),g=t(99357),n=t(5636),s=t(88425),l=t(66456),h=t(72850),b=t(87933),p=t(9139),P=t(49372),S=t(41415),D=t(27649),R=t(27677),v=t(15335),a=t(5803),d=t(28356),r=t(17e3),o=t(96709),u=t(55721),x=t(89793),M=t.n(x),m=t(15503),k=i=>i,J=t(97889),N=t(3040),c=t.n(N);const B={isLoading:!0,isSubmiting:!1,initialData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1},modifiedData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1}};var $=(i,C)=>(0,J.default)(i,f=>{switch(C.type){case"CANCEL_CHANGES":{f.modifiedData=i.initialData;break}case"GET_DATA_SUCCEEDED":{f.isLoading=!1,f.initialData=C.data,f.modifiedData=C.data;break}case"ON_CHANGE":{c()(f,["modifiedData",...C.keys.split(".")],C.value);break}case"ON_SUBMIT":{f.isSubmiting=!0;break}case"SUBMIT_SUCCEEDED":{f.initialData=i.modifiedData,f.isSubmiting=!1;break}case"ON_SUBMIT_ERROR":{f.isSubmiting=!1;break}default:return i}}),y=t(93826),O=t(98399);const W=()=>{const{formatMessage:i}=(0,n.useIntl)(),{lockApp:C,unlockApp:f}=(0,s.useOverlayBlocker)(),H=(0,s.useNotification)(),{get:K,put:G}=(0,s.useFetchClient)();(0,s.useFocusWhenNavigate)();const[{initialData:V,isLoading:Q,isSubmiting:X,modifiedData:z},I]=(0,e.useReducer)($,B,k),q=(0,e.useRef)(!0);(0,e.useEffect)(()=>{const j=u.Z.CancelToken.source(),te=async()=>{try{const{data:{data:w}}=await K((0,m.IF)("settings"),{cancelToken:j.token});I({type:"GET_DATA_SUCCEEDED",data:w})}catch(w){O.error(w)}};return q.current&&te(),()=>{j.cancel("Operation canceled by the user."),q.current=!1}},[]);const _=M()(V,z),ee=async L=>{if(L.preventDefault(),!_){C(),I({type:"ON_SUBMIT"});try{await G((0,m.IF)("settings"),z),I({type:"SUBMIT_SUCCEEDED"}),H({type:"success",message:{id:"notification.form.success.fields"}})}catch(j){O.error(j),I({type:"ON_SUBMIT_ERROR"})}f()}},Y=({target:{name:L,value:j}})=>{I({type:"ON_CHANGE",keys:L,value:j})};return e.createElement(D.o,{tabIndex:-1},e.createElement(g.Helmet,{title:i({id:(0,m.OB)("page.title"),defaultMessage:"Settings - Media Libray"})}),e.createElement("form",{onSubmit:ee},e.createElement(d.T,{title:i({id:(0,m.OB)("settings.header.label"),defaultMessage:"Media Library"}),primaryAction:e.createElement(S.z,{disabled:_,"data-testid":"save-button",loading:X,type:"submit",startIcon:e.createElement(l.Z,null),size:"S"},i({id:"global.save",defaultMessage:"Save"})),subtitle:i({id:(0,m.OB)("settings.sub-header.label"),defaultMessage:"Configure the settings for the Media Library"})}),e.createElement(r.D,null,Q?e.createElement(s.LoadingIndicatorPage,null):e.createElement(o.A,null,e.createElement(R.K,{spacing:12},e.createElement(h.x,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(R.K,{spacing:4},e.createElement(b.k,null,e.createElement(P.Z,{variant:"delta",as:"h2"},i({id:(0,m.OB)("settings.blockTitle"),defaultMessage:"Asset management"}))),e.createElement(v.r,{gap:6},e.createElement(a.P,{col:6,s:12},e.createElement(p.s,{"aria-label":"responsiveDimensions","data-testid":"responsiveDimensions",checked:z.responsiveDimensions,hint:i({id:(0,m.OB)("settings.form.responsiveDimensions.description"),defaultMessage:"Enabling this option will generate multiple formats (small, medium and large) of the uploaded asset."}),label:i({id:(0,m.OB)("settings.form.responsiveDimensions.label"),defaultMessage:"Responsive friendly upload"}),name:"responsiveDimensions",offLabel:i({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:i({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:L=>{Y({target:{name:"responsiveDimensions",value:L.target.checked}})}})),e.createElement(a.P,{col:6,s:12},e.createElement(p.s,{"aria-label":"sizeOptimization","data-testid":"sizeOptimization",checked:z.sizeOptimization,hint:i({id:(0,m.OB)("settings.form.sizeOptimization.description"),defaultMessage:"Enabling this option will reduce the image size and slightly reduce its quality."}),label:i({id:(0,m.OB)("settings.form.sizeOptimization.label"),defaultMessage:"Size optimization"}),name:"sizeOptimization",offLabel:i({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:i({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:L=>{Y({target:{name:"sizeOptimization",value:L.target.checked}})}})),e.createElement(a.P,{col:6,s:12},e.createElement(p.s,{"aria-label":"autoOrientation","data-testid":"autoOrientation",checked:z.autoOrientation,hint:i({id:(0,m.OB)("settings.form.autoOrientation.description"),defaultMessage:"Enabling this option will automatically rotate the image according to EXIF orientation tag."}),label:i({id:(0,m.OB)("settings.form.autoOrientation.label"),defaultMessage:"Auto orientation"}),name:"autoOrientation",offLabel:i({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:i({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:L=>{Y({target:{name:"autoOrientation",value:L.target.checked}})}}))))))))))};var F=()=>e.createElement(s.CheckPagePermissions,{permissions:y.Z.settings},e.createElement(W,null))},17e3:function(U,E,t){t.d(E,{D:function(){return s}});var e=t(32735),g=t(60216),n=t(72850);const s=({children:l})=>e.createElement(n.x,{paddingLeft:10,paddingRight:10},l);s.propTypes={children:g.node.isRequired}},28356:function(U,E,t){t.d(E,{T:function(){return D}});var e=t(32735),g=t(83292),n=t(60216),s=t(49372),l=t(72850),h=t(87933);const b=a=>{const d=(0,e.useRef)(null),[r,o]=(0,e.useState)(!0),u=([x])=>{o(x.isIntersecting)};return(0,e.useEffect)(()=>{const x=d.current,M=new IntersectionObserver(u,a);return x&&M.observe(d.current),()=>{x&&M.disconnect()}},[d,a]),[d,r]};var p=t(81002);const P=(a,d)=>{const r=(0,p.useCallbackRef)(d);(0,e.useLayoutEffect)(()=>{const o=new ResizeObserver(r);return Array.isArray(a)?a.forEach(u=>{u.current&&o.observe(u.current)}):a.current&&o.observe(a.current),()=>{o.disconnect()}},[a,r])},S=()=>{const a=(0,e.useRef)(null),[d,r]=(0,e.useState)(null),[o,u]=b({root:null,rootMargin:"0px",threshold:0});return P(o,()=>{o.current&&r(o.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{a.current&&r(a.current.getBoundingClientRect())},[a]),{containerRef:o,isVisible:u,baseHeaderLayoutRef:a,headerSize:d}},D=a=>{const{containerRef:d,isVisible:r,baseHeaderLayoutRef:o,headerSize:u}=S();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:u?.height},ref:d},r&&e.createElement(v,{ref:o,...a})),!r&&e.createElement(v,{...a,sticky:!0,width:u?.width}))};D.displayName="HeaderLayout";const R=(0,g.default)(l.x)`
  width: ${a=>a.width}px;
`,v=e.forwardRef(({navigationAction:a,primaryAction:d,secondaryAction:r,subtitle:o,title:u,sticky:x,width:M,...m},T)=>{const k=typeof o=="string";return x?e.createElement(R,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:M,zIndex:4,"data-strapi-header-sticky":!0},e.createElement(h.k,{justifyContent:"space-between"},e.createElement(h.k,null,a&&e.createElement(l.x,{paddingRight:3},a),e.createElement(l.x,null,e.createElement(s.Z,{variant:"beta",as:"h1",...m},u),k?e.createElement(s.Z,{variant:"pi",textColor:"neutral600"},o):o),r?e.createElement(l.x,{paddingLeft:4},r):null),e.createElement(h.k,null,d?e.createElement(l.x,{paddingLeft:2},d):void 0))):e.createElement(l.x,{ref:T,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:a?6:8,background:"neutral100","data-strapi-header":!0},a?e.createElement(l.x,{paddingBottom:2},a):null,e.createElement(h.k,{justifyContent:"space-between"},e.createElement(h.k,null,e.createElement(s.Z,{as:"h1",variant:"alpha",...m},u),r?e.createElement(l.x,{paddingLeft:4},r):null),d),k?e.createElement(s.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},o):o)});v.displayName="BaseHeaderLayout",v.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},v.propTypes={navigationAction:n.node,primaryAction:n.node,secondaryAction:n.node,sticky:n.bool,subtitle:n.oneOfType([n.string,n.node]),title:n.string.isRequired,width:n.number},D.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},D.propTypes={navigationAction:n.node,primaryAction:n.node,secondaryAction:n.node,subtitle:n.oneOfType([n.string,n.node]),title:n.string.isRequired}},96709:function(U,E,t){t.d(E,{A:function(){return b}});var e=t(32735),g=t(60216),n=t(83292),s=t(72850);const l=(0,n.default)(s.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:p})=>p?"auto 1fr":"1fr"};
`,h=(0,n.default)(s.x)`
  overflow-x: hidden;
`,b=({sideNav:p,children:P})=>e.createElement(l,{hasSideNav:Boolean(p)},p,e.createElement(h,{paddingBottom:10},P));b.defaultProps={sideNav:void 0},b.propTypes={children:g.node.isRequired,sideNav:g.node}},27649:function(U,E,t){t.d(E,{o:function(){return l}});var e=t(32735),g=t(60216),n=t(83292);const s=n.default.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,l=({labelledBy:h,...b})=>{const p=h||"main-content-title";return e.createElement(s,{"aria-labelledby":p,id:"main-content",tabIndex:-1,...b})};l.defaultProps={labelledBy:void 0},l.propTypes={labelledBy:g.string}},7563:function(U,E,t){t.d(E,{A:function(){return R}});var e=t(74512),g=t(32735),n=t(83292),s=t(57269),l=t(72850),h=t(49372),b=t(87933),p=t(30350);const P=n.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,S=n.default.div`
  animation: ${P} 2s infinite linear;
  will-change: transform;
`,D=(0,n.default)(b.k)`
  background: transparent;
  border: none;

  &[aria-disabled='true'] {
    pointer-events: none;
    svg path {
      fill: ${({theme:v})=>v.colors.neutral600};
    }
  }

  svg {
    display: flex;
    font-size: ${10/16}rem;
  }

  svg path {
    fill: ${({theme:v})=>v.colors.primary600};
  }

  ${p.BF}
`,R=g.forwardRef(({children:v,startIcon:a,endIcon:d,onClick:r,disabled:o=!1,loading:u=!1,...x},M)=>{const m=r&&!o?r:void 0,T=o||u;return(0,e.jsxs)(D,{ref:M,"aria-disabled":T,onClick:m,as:"button",type:"button",...x,children:[(a||u)&&(0,e.jsx)(l.x,{as:"span",paddingRight:2,"aria-hidden":!0,children:u?(0,e.jsx)(S,{children:(0,e.jsx)(s.Loader,{})}):a}),(0,e.jsx)(h.Z,{variant:"pi",textColor:T?"neutral600":"primary600",children:v}),d&&(0,e.jsx)(l.x,{as:"span",paddingLeft:2,"aria-hidden":!0,children:d})]})});R.displayName="TextButton"},9139:function(U,E,t){t.d(E,{s:function(){return N}});var e=t(32735),g=t(83292),n=t(60216),s=t(78542),l=t(66436),h=t(87107),b=t(76437),p=t(67014),P=t(47851),S=t(27677),D=t(87933),R=t(7563),v=t(30350),a=t(49372),d=t(3685),r=t(72850),o=t(76144);const u=g.default.label`
  position: relative;
  display: inline-block;
  z-index: 0;
  width: 100%;
`,x=(0,g.default)(r.x)`
  cursor: ${({disabled:c})=>c?"not-allowed":void 0};
  // Masks the background of each value
  overflow: hidden;
  flex-wrap: wrap;

  ${(0,v.k3)()}
`,M=(0,g.default)(D.k).attrs({hasRadius:!0})`
  background-color: ${({theme:c,checked:B,disabled:A})=>B?A?c.colors.neutral200:c.colors.neutral0:"transparent"};
  border: 1px solid
    ${({theme:c,checked:B,disabled:A})=>B&&B!==null?A?c.colors.neutral300:c.colors.neutral200:A?c.colors.neutral150:c.colors.neutral100};
  position: relative;
  user-select: none;
  z-index: 2;
  flex: 1 1 50%;
  /**
    We declare the defined value because we want the height of the input when 
    the values are in a row to be 40px. But defining a height on the label
    would break the input when it wraps.
  */
  padding-top: ${({size:c})=>`${c==="S"?"2px":"6px"}`};
  padding-bottom: ${({size:c})=>`${c==="S"?"2px":"6px"}`};
`,m=g.default.input`
  height: 100%;
  left: 0;
  opacity: 0;
  position: absolute;
  top: 0;
  z-index: 1;
  width: 100%;
`,T=e.forwardRef(({size:c,onLabel:B,offLabel:A,children:$,checked:y,disabled:O,onChange:W,...Z},F)=>{const{error:i,hint:C,id:f,name:H,required:K}=(0,o.U)(),G="neutral600";let V=!y&&y!==null?"danger700":G,Q=y?"primary600":G;const X=I=>{O||W(I)};let z;return i?z=`${f}-error`:C&&(z=`${f}-hint`),e.createElement(u,null,e.createElement(d.T,null,$),e.createElement(x,{hasRadius:!0,disabled:O,padding:1,display:"flex",background:O?"neutral150":"neutral100",borderStyle:"solid",borderWidth:"1px",borderColor:"neutral200"},e.createElement(M,{size:c,paddingLeft:3,paddingRight:3,justifyContent:"center",alignItems:"center","aria-hidden":!0,checked:y===null?!1:!y,disabled:O},e.createElement(a.Z,{variant:"pi",fontWeight:"bold",textTransform:"uppercase",textColor:O?"neutral700":V},A)),e.createElement(M,{size:c,paddingLeft:3,paddingRight:3,justifyContent:"center",alignItems:"center","aria-hidden":!0,checked:y===null?!1:y,disabled:O},e.createElement(a.Z,{variant:"pi",fontWeight:"bold",textTransform:"uppercase",textColor:O?"neutral700":Q},B)),e.createElement(m,{type:"checkbox","aria-disabled":O,"aria-describedby":z,onChange:I=>X(I),name:H,ref:F,"aria-required":K,...Z,checked:!(y===null||!y)})))});T.displayName="ToggleCheckbox",T.defaultProps={disabled:!1,checked:!1,onChange:void 0,size:"M"},T.propTypes={checked:n.bool,children:n.string.isRequired,disabled:n.bool,offLabel:n.string.isRequired,onChange:n.func,onLabel:n.string.isRequired,size:n.oneOf(Object.keys(s.J.input))};const k=(0,g.default)(h.g)`
  max-width: 320px;
`,J=(0,g.default)(R.A)`
  align-self: flex-end;
  margin-left: auto;
`,N=({disabled:c,size:B,error:A,hint:$,label:y,name:O,labelAction:W,required:Z,id:F,onClear:i,clearLabel:C,checked:f,...H})=>{const K=(0,l.M)(F);return e.createElement(k,{name:O,hint:$,error:A,id:K,required:Z},e.createElement(S.K,{spacing:1},e.createElement(D.k,null,e.createElement(b.Q,{action:W},y),C&&i&&f!==null&&!c&&e.createElement(J,{onClick:i},C)),e.createElement(T,{id:K,size:B,checked:f,disabled:c,...H},y),e.createElement(p.J,null),e.createElement(P.c,null)))};N.displayName="ToggleInput",N.defaultProps={checked:!1,clearLabel:void 0,disabled:!1,error:void 0,hint:void 0,id:void 0,label:"",labelAction:void 0,name:"",onClear:void 0,required:!1,size:"M"},N.propTypes={checked:n.bool,clearLabel:n.string,disabled:n.bool,error:n.string,hint:n.oneOfType([n.string,n.node,n.arrayOf(n.node)]),id:n.string,label:n.string,labelAction:n.node,name:n.string,onClear:n.func,required:n.bool,size:n.oneOf(Object.keys(s.J.input))}}}]);
