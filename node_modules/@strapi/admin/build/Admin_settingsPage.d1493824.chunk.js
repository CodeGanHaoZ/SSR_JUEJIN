"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[5895],{96822:function(_,v,t){t.r(v),t.d(v,{SettingsPage:function(){return kt},default:function(){return St}});var e=t(32735),S=t(88425),i=t(5141),re=t(96709),X=t(5636),je=t(99357),ae=t(8888),be=t(64421),De=t(84968),Te=t(28356),Ke=t(17e3),V=t(27649),x=t(72850),R=t(15335),ye=t(5803),U=t(49372),Be=t(27677),W=t(41415),se=t(41502),I=t(47361),Ne=t(66456),Q=t(72041),$e=t(60216),p=t.n($e);const de=750,Ae=100,xe=["image/jpeg","image/png","image/svg+xml"];var We=t(23272),Xe=t(68387),Ge=t(98779),Qe=t(50563),tt=t(19406),nt=t(44647),ot=t(85025),q=t(55225),ie=t(97889);const ke={localImage:void 0};var fe=(m=ke,u)=>(0,ie.default)(m,g=>{switch(u.type){case"SET_LOCAL_IMAGE":{g.localImage=u.value;break}default:return g}});const $=({onChangeLogo:m,customLogo:u,goTo:g,Component:E,modalTitle:P,next:O,prev:G,currentStep:w})=>{const[{localImage:pe},Y]=(0,e.useReducer)(fe,ke),{formatMessage:me}=(0,X.useIntl)(),K=ve=>{Y({type:"SET_LOCAL_IMAGE",value:ve})},Oe=()=>{g(null)};return w?e.createElement(ot.P,{labelledBy:"modal",onClose:Oe},e.createElement(q.x,null,e.createElement(U.Z,{fontWeight:"bold",as:"h2",id:"modal"},me(P))),e.createElement(E,{setLocalImage:K,goTo:g,next:O,prev:G,onClose:Oe,asset:pe||u,onChangeLogo:m})):null};$.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},$.propTypes={Component:p().elementType,currentStep:p().string,customLogo:p().shape({name:p().string,url:p().string,width:p().number,height:p().number,ext:p().string}),goTo:p().func.isRequired,modalTitle:p().shape({id:p().string,defaultMessage:p().string}),next:p().string,onChangeLogo:p().func.isRequired,prev:p().string};var ee=$;const ce={currentStep:void 0};var Ie=(m=ce,u)=>(0,ie.default)(m,g=>{switch(u.type){case"GO_TO":{g.currentStep=u.to;break}default:return g}}),Me=t(35540),le=t(39291),he=t(3653),ze=t(9026),h=t(83292),Pe=t(87933),He=t(99140),A=t(11406),B=t(98275),j=t(87107),ne=t(47851),Z=t(47284);const Ce={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},Ee={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},Ye=m=>new Promise(u=>{const g=new FileReader;g.onload=()=>{const E=new Image;E.onload=function(){u({width:E.width,height:E.height})},E.src=g.result},g.readAsDataURL(m)}),Ve=(m,u)=>({ext:m.name.split(".").pop(),size:m.size/1e3,name:m.name,url:URL.createObjectURL(m),rawFile:m,width:u.width,height:u.height}),L=async m=>{let u;if(!xe.includes(m.type))throw u=new Error("File format"),u.displayMessage=Ce,u;const E=await Ye(m);if(!(E.width<=de&&E.height<=de))throw u=new Error("File sizing"),u.displayMessage=Ee,u;const O=Ve(m,E);if(!(O.size<=Ae))throw u=new Error("File sizing"),u.displayMessage=Ee,u;return O},ue=(0,h.default)(B._)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,at=({setLocalImage:m,goTo:u,next:g,onClose:E})=>{const{formatMessage:P}=(0,X.useIntl)(),[O,G]=(0,e.useState)(!1),[w,pe]=(0,e.useState)(void 0),Y=(0,e.useRef)(null),me=()=>G(!0),K=()=>G(!1),Oe=Je=>{Je.preventDefault(),Y.current.click()},ve=async()=>{K();const Je=Y.current.files[0];if(Je)try{const qe=await L(Je);m(qe),u(g)}catch(qe){if(qe.displayMessage)pe(P(qe.displayMessage,{size:Ae,dimension:de})),Y.current.focus();else throw qe}},Ze=()=>O?"primary500":w?"danger600":"neutral300";return e.createElement(e.Fragment,null,e.createElement("form",null,e.createElement(x.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(j.g,{name:"logo-upload",error:w},e.createElement("label",{htmlFor:"logo-upload"},e.createElement(Be.K,{spacing:2},e.createElement(Pe.k,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:O?"primary100":"neutral100",borderColor:Ze(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:me,onDragLeave:K},e.createElement(He.J,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:Z.Z,"aria-hidden":!0}),e.createElement(x.x,{paddingTop:3,paddingBottom:5},e.createElement(U.Z,{variant:"delta",as:"span"},P({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"}))),e.createElement(ue,{accept:xe,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:ve,ref:Y,id:"logo-upload"}),e.createElement(W.z,{type:"button",onClick:Oe},P({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})),e.createElement(x.x,{paddingTop:6},e.createElement(U.Z,{variant:"pi",textColor:"neutral600"},P({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:Ae,dimension:de})))),e.createElement(ne.c,null)))))),e.createElement(A.m,{startActions:e.createElement(W.z,{onClick:E,variant:"tertiary"},P({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"}))}))};at.defaultProps={next:null},at.propTypes={goTo:p().func.isRequired,next:p().string,onClose:p().func.isRequired,setLocalImage:p().func.isRequired};var Tt=at,At=t(10369),it=t(55721),ft=async m=>{try{const u=await it.Z.get(m,{responseType:"blob",timeout:8e3});return new File([u.data],u.config.url,{type:u.headers["content-type"]})}catch(u){throw u.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},u}};const xt=({goTo:m,next:u,onClose:g,setLocalImage:E})=>{const{formatMessage:P}=(0,X.useIntl)(),[O,G]=(0,e.useState)(""),[w,pe]=(0,e.useState)(null),Y=K=>{G(K.target.value)},me=async()=>{try{const K=await ft(O),Oe=await L(K);E(Oe),m(u)}catch(K){if(K.displayMessage)pe(P(K.displayMessage,{size:Ae,dimension:de}));else throw K}};return e.createElement("form",{onSubmit:K=>{K.preventDefault(),me()}},e.createElement(x.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(At.o,{label:P({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:w,onChange:Y,value:O,name:"logo-url"})),e.createElement(A.m,{startActions:e.createElement(W.z,{onClick:g,variant:"tertiary"},P({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(W.z,{type:"submit"},P({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"}))}))};xt.defaultProps={next:null},xt.propTypes={goTo:p().func.isRequired,next:p().string,onClose:p().func.isRequired,setLocalImage:p().func.isRequired};var st=xt;const Mt=({setLocalImage:m,goTo:u,next:g,onClose:E})=>{const{formatMessage:P}=(0,X.useIntl)();return e.createElement(Me.v,{label:P({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple"},e.createElement(x.x,{paddingLeft:8,paddingRight:8},e.createElement(le.m,null,e.createElement(le.O,null,P({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})),e.createElement(le.O,null,P({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"}))),e.createElement(ze.i,null)),e.createElement(he.n,null,e.createElement(he.x,null,e.createElement(Tt,{onClose:E,setLocalImage:m,goTo:u,next:g})),e.createElement(he.x,null,e.createElement(st,{onClose:E,setLocalImage:m,goTo:u,next:g}))))};Mt.defaultProps={next:null},Mt.propTypes={goTo:p().func.isRequired,next:p().string,onClose:p().func.isRequired,setLocalImage:p().func.isRequired};var Vt=Mt,wt=t(42466),vn=t(20853),lt=t(2800),Sn=t(26835),rt=t(41048),ht=t(37083),Et=t(11505);const yt=({asset:m})=>{const{formatMessage:u}=(0,X.useIntl)();return e.createElement(wt.Z,null,e.createElement(vn.O,null,e.createElement(lt.H,{size:"S",src:m.url})),e.createElement(Sn.e,null,e.createElement(rt.a,null,e.createElement(ht.l,null,m.name),e.createElement(ht._,null,`${m.ext.toUpperCase()} - ${m.width}\u2715${m.height}`)),e.createElement(Et.E,null,u({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"}))))};yt.propTypes={asset:p().shape({name:p().string,url:p().string,width:p().number,height:p().number,ext:p().string}).isRequired};var Kt=yt;const ut=({onClose:m,asset:u,prev:g,next:E,goTo:P,setLocalImage:O,onChangeLogo:G})=>{const{formatMessage:w}=(0,X.useIntl)(),pe=()=>{O(void 0),P(g)},Y=()=>{G(u),P(E)};return e.createElement(e.Fragment,null,e.createElement(x.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(Pe.k,{justifyContent:"space-between",paddingBottom:6},e.createElement(Pe.k,{direction:"column",alignItems:"flex-start"},e.createElement(U.Z,{variant:"pi",fontWeight:"bold"},w({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})),e.createElement(U.Z,{variant:"pi",textColor:"neutral500"},w({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"}))),e.createElement(W.z,{onClick:pe,variant:"secondary"},w({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"}))),e.createElement(x.x,{maxWidth:(0,S.pxToRem)(180)},e.createElement(Kt,{asset:u}))),e.createElement(A.m,{startActions:e.createElement(W.z,{onClick:m,variant:"tertiary"},w({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(W.z,{onClick:Y},w({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"}))}))};ut.defaultProps={next:null,prev:null},ut.propTypes={goTo:p().func.isRequired,asset:p().shape({name:p().string,url:p().string,width:p().number,height:p().number,ext:p().string}).isRequired,next:p().string,onClose:p().func.isRequired,onChangeLogo:p().func.isRequired,prev:p().string,setLocalImage:p().func.isRequired};var Lt=ut,Qt={upload:{Component:Vt,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:Lt,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}};const mt=({canUpdate:m,customLogo:u,defaultLogo:g,hint:E,label:P,onChangeLogo:O,onResetLogo:G})=>{const[{currentStep:w},pe]=(0,e.useReducer)(Ie,ce),{Component:Y,next:me,prev:K,modalTitle:Oe}=Qt[w]||{},{formatMessage:ve}=(0,X.useIntl)(),Ze=Je=>{pe({type:"GO_TO",to:Je})};return e.createElement(e.Fragment,null,e.createElement(We.F,{label:P,selectedSlide:0,hint:E,previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:u?.name||"logo.png",actions:e.createElement(Xe.b,null,e.createElement(Qe.h,{disabled:!m,onClick:()=>Ze(u?"pending":"upload"),label:ve({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:e.createElement(tt.default,null)}),u&&e.createElement(Qe.h,{disabled:!m,onClick:G,label:ve({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:e.createElement(nt.Z,null)}))},e.createElement(Ge.q,{label:ve({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"})},e.createElement(x.x,{maxHeight:"40%",maxWidth:"40%",as:"img",src:u?.url||g,alt:ve({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})}))),e.createElement(ee,{Component:Y,currentStep:w,onChangeLogo:O,customLogo:u,goTo:Ze,next:me,prev:K,modalTitle:Oe}))};mt.defaultProps={canUpdate:!1,customLogo:null,hint:null},mt.propTypes={canUpdate:p().bool,customLogo:p().shape({url:p().string,name:p().string}),label:p().string.isRequired,hint:p().string,defaultLogo:p().string.isRequired,onChangeLogo:p().func.isRequired,onResetLogo:p().func.isRequired};var Dt=mt;const It={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}},authLogo:{display:null,submit:{rawFile:null,isReset:!1}}};var Pt=(m=It,u)=>(0,ie.default)(m,g=>{switch(u.type){case"SET_CUSTOM_MENU_LOGO":{g.menuLogo.display=u.value,g.menuLogo.submit.rawFile=u.value.rawFile;break}case"SET_CUSTOM_AUTH_LOGO":{g.authLogo.display=u.value,g.authLogo.submit.rawFile=u.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{g.menuLogo.display=null,g.menuLogo.submit={rawFile:null,isReset:!0};break}case"RESET_CUSTOM_AUTH_LOGO":{g.authLogo.display=null,g.authLogo.submit={rawFile:null,isReset:!0};break}default:return g}}),Yt=t(86349),Ot=t.n(Yt),Jt=(m,u)=>Ot()(m,{menuLogo:{display:u.menuLogo},authLogo:{display:u.authLogo}});const Ft=(0,e.forwardRef)(({canUpdate:m,projectSettingsStored:u},g)=>{const{formatMessage:E}=(0,X.useIntl)(),{trackUsage:P}=(0,S.useTracking)(),{logos:{menu:O,auth:G}}=(0,ae.um)(),[{menuLogo:w,authLogo:pe},Y]=(0,e.useReducer)(Pt,It,()=>Jt(It,u)),me=Ze=>{Y({type:"SET_CUSTOM_MENU_LOGO",value:Ze})},K=()=>{P("didClickResetLogo",{logo:"menu"}),Y({type:"RESET_CUSTOM_MENU_LOGO"})},Oe=Ze=>{Y({type:"SET_CUSTOM_AUTH_LOGO",value:Ze})},ve=()=>{P("didClickResetLogo",{logo:"auth"}),Y({type:"RESET_CUSTOM_AUTH_LOGO"})};return(0,e.useImperativeHandle)(g,()=>({getValues:()=>({menuLogo:w.submit,authLogo:pe.submit})})),e.createElement(x.x,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(U.Z,{variant:"delta",as:"h3"},E({id:"Settings.application.customization",defaultMessage:"Customization"})),e.createElement(U.Z,{variant:"pi",textColor:"neutral600"},E({id:"Settings.application.customization.size-details",defaultMessage:"Max dimension: {dimension}\xD7{dimension}, Max file size: {size}KB"},{dimension:de,size:Ae})),e.createElement(R.r,{paddingTop:4,gap:4},e.createElement(ye.P,{col:6,s:12},e.createElement(Dt,{canUpdate:m,customLogo:w.display,defaultLogo:O.default,hint:E({id:"Settings.application.customization.menu-logo.carousel-hint",defaultMessage:"Replace the logo in the main navigation"}),label:E({id:"Settings.application.customization.carousel.menu-logo.title",defaultMessage:"Menu logo"}),onChangeLogo:me,onResetLogo:K})),e.createElement(ye.P,{col:6,s:12},e.createElement(Dt,{canUpdate:m,customLogo:pe.display,defaultLogo:G.default,hint:E({id:"Settings.application.customization.auth-logo.carousel-hint",defaultMessage:"Replace the logo in the authentication pages"}),label:E({id:"Settings.application.customization.carousel.auth-logo.title",defaultMessage:"Auth logo"}),onChangeLogo:Oe,onResetLogo:ve}))))});Ft.defaultProps={canUpdate:!1,projectSettingsStored:null},Ft.propTypes={canUpdate:p().bool,projectSettingsStored:p().shape({menuLogo:p().shape({url:p().string,name:p().string})})};var Bt=Ft,Tn=t(48344),qt=t.n(Tn),Nt=m=>qt()(m,(u,g,E)=>{g&&g.url?u[E]={...g,url:(0,S.prefixFileUrlWithBackendUrl)(g.url)}:u[E]=g},{});const _t=async()=>{const{get:m}=(0,S.getFetchClient)(),{data:u}=await m("/admin/project-settings");return Nt(u)},Ct=async m=>{const{post:u}=(0,S.getFetchClient)(),{data:g}=await u("/admin/project-settings",m,{headers:{"Content-Type":"multipart/form-data"}});return Nt(g)};var $t=m=>{const u=new FormData;return Object.entries(m).forEach(([g,E])=>{E&&E.rawFile instanceof File&&u.append(g,E.rawFile),E&&E.isReset&&u.append(g,null)}),u},tn=()=>{const m=(0,e.useRef)(),u=(0,S.useNotification)(),{trackUsage:g}=(0,S.useTracking)(),{formatMessage:E}=(0,X.useIntl)(),P=(0,De.useQueryClient)();(0,S.useFocusWhenNavigate)();const O=(0,S.useAppInfos)(),{shouldUpdateStrapi:G,latestStrapiReleaseTag:w,strapiVersion:pe}=O,{updateProjectSettings:Y}=(0,ae.um)(),{allowedActions:{canRead:me,canUpdate:K}}=(0,S.useRBAC)(Q.Z.settings["project-settings"]),Oe=me&&K,{data:ve}=(0,De.useQuery)("project-settings",_t,{enabled:me}),Ze=O.communityEdition?"app.components.UpgradePlanModal.text-ce":"app.components.UpgradePlanModal.text-ee",Je=(0,De.useMutation)(dt=>Ct(dt),{async onSuccess({menuLogo:dt,authLogo:pt}){await P.invalidateQueries("project-settings",{refetchActive:!0}),Y({menuLogo:dt?.url,authLogo:pt?.url})}}),qe=dt=>{if(dt.preventDefault(),!K)return;const pt=m.current.getValues(),mn=$t(pt);Je.mutate(mn,{onSuccess(){const{menuLogo:pn,authLogo:gn}=pt;pn.rawFile&&g("didChangeLogo",{logo:"menu"}),gn.rawFile&&g("didChangeLogo",{logo:"auth"}),u({type:"success",message:E({id:"app",defaultMessage:"Saved"})})},onError(){u({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}})};return e.createElement(re.A,null,e.createElement(S.SettingsPageTitle,{name:"Application"}),e.createElement(V.o,null,e.createElement("form",{onSubmit:qe},e.createElement(Te.T,{title:E({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:E({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:Oe&&e.createElement(W.z,{type:"submit",startIcon:e.createElement(Ne.Z,null)},E({id:"global.save",defaultMessage:"Save"}))}),e.createElement(Ke.D,null,e.createElement(Be.K,{spacing:6},e.createElement(Be.K,{spacing:5,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(U.Z,{variant:"delta",as:"h3"},E({id:"global.details",defaultMessage:"Details"})),e.createElement(R.r,{paddingTop:1},e.createElement(ye.P,{col:6,s:12},e.createElement(U.Z,{variant:"sigma",textColor:"neutral600"},E({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})),e.createElement(U.Z,{as:"p"},"v",pe),e.createElement(se.r,{href:O.communityEdition?"https://discord.strapi.io":"https://support.strapi.io/support/home",isExternal:!0,endIcon:e.createElement(I.Z,null)},E({id:"Settings.application.get-help",defaultMessage:"Get help"}))),e.createElement(ye.P,{col:6,s:12},e.createElement(U.Z,{variant:"sigma",textColor:"neutral600"},E({id:"Settings.application.edition-title",defaultMessage:"current plan"})),e.createElement(U.Z,{as:"p"},E({id:Ze,defaultMessage:`${O.communityEdition?"Community Edition":"Enterprise Edition"}`})))),e.createElement(R.r,{paddingTop:1},e.createElement(ye.P,{col:6,s:12},G&&e.createElement(se.r,{href:`https://github.com/strapi/strapi/releases/tag/${w}`,isExternal:!0,endIcon:e.createElement(I.Z,null)},E({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"}))),e.createElement(ye.P,{col:6,s:12},e.createElement(se.r,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement(I.Z,null)},E({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})))),e.createElement(x.x,{paddingTop:1},e.createElement(U.Z,{variant:"sigma",textColor:"neutral600"},E({id:"Settings.application.node-version",defaultMessage:"node version"})),e.createElement(U.Z,{as:"p"},O.nodeVersion))),me&&ve&&e.createElement(Bt,{canUpdate:K,ref:m,projectSettingsStored:ve}))))))},nn=t(3704),on=t.n(nn),an=m=>on()(m,g=>g.links).map(g=>(0,be.ot)(g.Component,g.to,g.exact||!1)),sn=m=>m.filter(u=>!u.links.every(g=>g.isDisplayed===!1));const jt=(()=>window&&window.strapi&&window.strapi.isEE?t(20178).Z:t(16329).Z)(),Ln=(()=>window&&window.strapi&&window.strapi.isEE?t(51899).Z:t(45677).Z)();var zt=[{Component(){return{default:Ln}},to:"/settings/roles",exact:!0},{Component(){return{default:jt}},to:"/settings/roles/duplicate/:id",exact:!0},{Component(){return{default:jt}},to:"/settings/roles/new",exact:!0},{async Component(){return await t.e(2544).then(t.bind(t,33778))},to:"/settings/roles/:id",exact:!0},{async Component(){return await t.e(5199).then(t.bind(t,27549))},to:"/settings/users",exact:!0},{async Component(){return await t.e(4263).then(t.bind(t,34669))},to:"/settings/users/:id",exact:!0},{async Component(){return await t.e(5162).then(t.bind(t,33238))},to:"/settings/webhooks/create",exact:!0},{async Component(){return await t.e(5162).then(t.bind(t,59021))},to:"/settings/webhooks/:id",exact:!0},{async Component(){return await t.e(4121).then(t.bind(t,74767))},to:"/settings/webhooks",exact:!0},{async Component(){return await t.e(8056).then(t.bind(t,83782))},to:"/settings/api-tokens",exact:!0},{async Component(){return await Promise.all([t.e(8633),t.e(4318),t.e(4299)]).then(t.bind(t,3330))},to:"/settings/api-tokens/create",exact:!0},{async Component(){return await Promise.all([t.e(8633),t.e(4318),t.e(92)]).then(t.bind(t,97841))},to:"/settings/api-tokens/:id",exact:!0}],rn=[...(()=>window&&window.strapi&&window.strapi.isEE?t(63775).Z:t(75936).Z)(),...zt],vt=t(90700),dn=t(8598),cn=t(77013),Ut=t(79318),un=t(66618);const Wt=({menu:m})=>{const{formatMessage:u}=(0,X.useIntl)(),E=sn(m).map(O=>({...O,title:O.intlLabel,links:O.links.map(G=>({...G,title:G.intlLabel,name:G.id}))})),P=u({id:"global.settings",defaultMessage:"Settings"});return e.createElement(vt.m,{ariaLabel:P},e.createElement(dn.p,{label:P}),e.createElement(cn.Z,null,E.map(O=>e.createElement(Ut.D,{key:O.id,label:u(O.intlLabel)},O.links.map(G=>e.createElement(un.E,{as:i.NavLink,withBullet:G.hasNotification,to:G.to,key:G.id},u(G.intlLabel)))))))};Wt.propTypes={menu:p().array.isRequired};var Gt=Wt;function kt(){const{settingId:m}=(0,i.useParams)(),{settings:u}=(0,S.useStrapiApp)(),{formatMessage:g}=(0,X.useIntl)(),{isLoading:E,menu:P}=(0,ae.Te)(),O=(0,e.useMemo)(()=>(0,be.WW)(rn.map(({to:pe,Component:Y,exact:me})=>(0,be.ot)(Y,pe,me))),[]),G=an(u);if(E)return e.createElement(S.LoadingIndicatorPage,null);if(!m)return e.createElement(i.Redirect,{to:"/settings/application-infos"});const w=g({id:"global.settings",defaultMessage:"Settings"});return e.createElement(re.A,{sideNav:e.createElement(Gt,{menu:P})},e.createElement(je.Helmet,{title:w}),e.createElement(i.Switch,null,e.createElement(i.Route,{path:"/settings/application-infos",component:tn,exact:!0}),O,G))}var St=(0,e.memo)(kt)},16329:function(_,v,t){var e=t(32735),S=t(5141);const i=()=>e.createElement(S.Redirect,{to:"/404"});v.Z=i},49466:function(_,v){v.Z=!0},35123:function(_,v){v.Z=!0},18318:function(_,v){v.Z=!0},52124:function(_,v){v.Z=!0},61526:function(_,v){v.Z=!0},78974:function(_,v,t){t.d(v,{Z:function(){return fo}});var e=t(32735),S=t(60216),i=t.n(S),re=t(88425),X=t(35540),je=t(39291),ae=t(3653),be=t(23973),De=t.n(be),Te=t(86834),Ke=t.n(Te),V=t(5636),x=t(72850),R=t(83292),ye=t(98978),U=t.n(ye),Be=t(96441),W=t(15974),se=t(44426),I=t(87933),Ne=t(33795),Q=t.n(Ne),$e=t(9086),p=t.n($e),de=t(8888),Ae=t(45112),xe=t(41415);const We=R.default.div`
  position: relative;

  ${({hasConditions:o,disabled:n,theme:a})=>o&&`
    &:before {
      content: '';
      position: absolute;
      top: -3px;
      left: -10px;
      width: 6px;
      height: 6px;
      border-radius: ${20/16}rem;;
      background: ${n?a.colors.neutral100:a.colors.primary600};
    }
  `}
`,Xe=({onClick:o,className:n,hasConditions:a,variant:s})=>{const{formatMessage:l}=(0,V.useIntl)();return e.createElement(We,{hasConditions:a,className:n},e.createElement(xe.z,{variant:s,startIcon:e.createElement(Ae.Z,null),onClick:o},l({id:"global.settings",defaultMessage:"Settings"})))};Xe.defaultProps={className:null,hasConditions:!1,variant:"tertiary"},Xe.propTypes={onClick:i().func.isRequired,className:i().string,hasConditions:i().bool,variant:i().string};var Ge=(0,R.default)(Xe)``,Qe=t(85025),tt=t(55225),nt=t(31600),ot=t(11406),q=t(11299),ie=t(49372),ke=t(97889),M=t(81346),fe=t.n(M),$=t(23940),ee=t.n($),ce=t(27799);const te=o=>Object.values(o).map(n=>Object.entries(n).filter(([,a])=>a).map(([a])=>a)).flat(),Ie=o=>o.reduce((n,[a,s])=>(n.push({label:ee()(a),children:s.map(l=>({label:l.displayName,value:l.id}))}),n),[]),Me=(o,n)=>o.map(([,a])=>a).flat().reduce((a,s)=>({[s.id]:n.includes(s.id),...a}),{}),le=(()=>window&&window.strapi&&window.strapi.isEE?t(56899).Z:t(49466).Z)(),he=o=>{let{arrayOfOptionsGroupedByCategory:n,isFormDisabled:a,isGrey:s,label:l,name:r,onChange:d,value:c}=o;const{formatMessage:f}=(0,V.useIntl)(),y=C=>{d(r,Me(n,C))};return e.createElement(I.k,{as:"li",background:s?"neutral100":"neutral0",paddingBottom:3,paddingTop:3},e.createElement(I.k,{paddingLeft:6,style:{width:180}},e.createElement(ie.Z,{variant:"sigma",textColor:"neutral600"},f({id:"Settings.permissions.conditions.can",defaultMessage:"Can"}),"\xA0"),e.createElement(ie.Z,{variant:"sigma",title:l,textColor:"primary600",ellipsis:!0},f({id:`Settings.roles.form.permissions.${l.toLowerCase()}`,defaultMessage:l})),e.createElement(ie.Z,{variant:"sigma",textColor:"neutral600"},"\xA0",f({id:"Settings.permissions.conditions.when",defaultMessage:"When"}))),e.createElement(x.x,{style:{maxWidth:430,width:"100%"}},e.createElement(ce.Q,{id:r,customizeContent:C=>`${C.length} currently selected`,onChange:y,value:te(c),options:Ie(n),disabled:a||le})))};he.propTypes={arrayOfOptionsGroupedByCategory:i().array.isRequired,isFormDisabled:i().bool.isRequired,isGrey:i().bool.isRequired,label:i().string.isRequired,name:i().string.isRequired,value:i().object.isRequired,onChange:i().func.isRequired};var ze=he,h=t(92891);const Pe=(o,n)=>o.reduce((a,s)=>(a[s.id]=(0,h.get)(n,s.id,!1),a),{}),He=(o,n)=>o.reduce((a,s)=>{const[l,r]=s,d=Pe(r,n);return a[l]=d,a},{});var B=(o,n,a)=>o.reduce((s,l)=>{const r=(0,h.get)(n,[...l.pathToConditionsObject,"conditions"],{}),d=He(a,r);return s[l.pathToConditionsObject.join("..")]=d,s},{});const j=({actions:o,headerBreadCrumbs:n,isFormDisabled:a,onClosed:s,onToggle:l})=>{const{formatMessage:r}=(0,V.useIntl)(),{availableConditions:d,modifiedData:c,onChangeConditions:f}=(0,de.$_)(),y=(0,e.useMemo)(()=>Object.entries(fe()(d,"category")),[d]),C=o.filter(({isDisplayed:b,hasSomeActionsSelected:F,hasAllActionsSelected:z})=>b&&(F||z)),T=(0,e.useMemo)(()=>B(C,c,y),[C,c,y]),[D,J]=(0,e.useState)(T),N=(b,F)=>{J((0,ke.default)(z=>{z[b]||(z[b]={}),z[b].default||(z[b].default={}),z[b].default=F}))},k=()=>{const b=Object.entries(D).reduce((F,z)=>{const[H,oe]=z,Fe=Object.values(oe).reduce((Se,ge)=>({...Se,...ge}),{});return F[H]=Fe,F},{});f(b),l()};return e.createElement(Qe.P,{labelledBy:"condition-modal-breadcrumbs",onClose:s},e.createElement(tt.x,null,e.createElement(q.O,{id:"condition-modal-breadcrumbs",label:n.join(", ")},n.map(b=>e.createElement(q.$,{key:b},ee()(r({id:b,defaultMessage:b})))))),e.createElement(nt.f,null,C.length===0&&e.createElement(ie.Z,null,r({id:"Settings.permissions.conditions.no-actions",defaultMessage:"You first need to select actions (create, read, update, ...) before defining conditions on them."})),e.createElement("ul",null,C.map(({actionId:b,label:F,pathToConditionsObject:z},H)=>{const oe=z.join("..");return e.createElement(ze,{key:b,arrayOfOptionsGroupedByCategory:y,label:F,isFormDisabled:a,isGrey:H%2===0,name:oe,onChange:N,value:Q()(D,oe,{})})}))),e.createElement(ot.m,{startActions:e.createElement(xe.z,{variant:"tertiary",onClick:l},r({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(xe.z,{onClick:k},r({id:"Settings.permissions.conditions.apply",defaultMessage:"Apply"}))}))};j.propTypes={actions:i().arrayOf(i().shape({actionId:i().string.isRequired,checkboxName:i().string,hasSomeActionsSelected:i().bool.isRequired,hasAllActionsSelected:i().bool,isDisplayed:i().bool.isRequired,label:i().string})).isRequired,headerBreadCrumbs:i().arrayOf(i().string).isRequired,isFormDisabled:i().bool.isRequired,onClosed:i().func.isRequired,onToggle:i().func.isRequired};var ne=j;const Z=`${120/16}rem`,Ce=`${200/16}rem`,Ee=`${53/16}rem`;var Ve=R.default.div`
  width: ${Z};
`,ue=(0,R.default)(I.k)`
  padding-right: ${({theme:o})=>o.spaces[2]};
  overflow: hidden;
  flex: 1;
  ${({isCollapsable:o})=>o&&"cursor: pointer;"}
`;const at=({children:o,isCollapsable:n,isActive:a,isFormDisabled:s,label:l,onChange:r,onClick:d,checkboxName:c,someChecked:f,value:y})=>{const{formatMessage:C}=(0,V.useIntl)();return e.createElement(I.k,{alignItems:"center",paddingLeft:6,style:{width:Ce,flexShrink:0}},e.createElement(x.x,{paddingRight:2},e.createElement(se.C,{name:c,"aria-label":C({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:l}),disabled:s,onValueChange:T=>r({target:{name:c,value:T}}),indeterminate:f,value:y})),e.createElement(ue,{title:l,alignItems:"center",isCollapsable:n,...n&&{onClick:d,"aria-expanded":a,onKeyDown:({key:T})=>(T==="Enter"||T===" ")&&d(),tabIndex:0,role:"button"}},e.createElement(ie.Z,{fontWeight:a?"bold":"",textColor:a?"primary600":"neutral800",ellipsis:!0},ee()(l)),o))};at.defaultProps={children:null,checkboxName:"",onChange(){},value:!1,someChecked:!1,isCollapsable:!1},at.propTypes={checkboxName:i().string,children:i().node,label:i().string.isRequired,isCollapsable:i().bool,isFormDisabled:i().bool.isRequired,onChange:i().func,onClick:i().func.isRequired,someChecked:i().bool,value:i().bool,isActive:i().bool.isRequired};var Tt=(0,e.memo)(at);const At=o=>(0,h.isObject)(o)?(0,h.flattenDeep)(Object.values(o).map(n=>(0,h.isObject)(n)?At(n):n)):[];var it=At,ft=o=>o?Object.keys(o).reduce((n,a)=>(a!=="conditions"&&(n[a]=o[a]),n),{}):null,st=o=>{const n=ft(o),a=it(n);if(!a.length)return{hasAllActionsSelected:!1,hasSomeActionsSelected:!1};const s=a.every(r=>r),l=a.some(r=>r)&&!s;return{hasAllActionsSelected:s,hasSomeActionsSelected:l}},Vt=(o,n,a)=>o.map(({actionId:s,isDisplayed:l,applyToProperties:r,label:d})=>{if(!l)return{actionId:s,hasSomeActionsSelected:!1,isDisplayed:l};const c=[...a.split(".."),s],f=(0,h.isEmpty)(r)?[...c,"properties","enabled"]:c,y=f.join(".."),C=(0,h.get)(n,[...c,"conditions"],null),T=it(C).some(k=>k);if((0,h.isEmpty)(r)){const k=(0,h.get)(n,f,!1);return{actionId:s,checkboxName:y,hasAllActionsSelected:k,hasConditions:T,hasSomeActionsSelected:k,isDisplayed:l,isParentCheckbox:!1,label:d,pathToConditionsObject:c}}const D=(0,h.get)(n,f,null),{hasAllActionsSelected:J,hasSomeActionsSelected:N}=st(D);return{actionId:s,checkboxName:y,hasAllActionsSelected:J,hasConditions:T,hasSomeActionsSelected:N,isDisplayed:l,isParentCheckbox:!0,label:d,pathToConditionsObject:c}}),wt=t(16899),lt=(0,R.default)(wt.default)`
  display: none;
  width: ${10/16}rem;
  transform: rotate(${({$isActive:o})=>o?"180":"0"}deg);
  margin-left: ${({theme:o})=>o.spaces[2]};
`,rt=o=>`
  ${ie.Z} {
    color: ${o.colors.primary600};
    font-weight: ${o.fontWeights.bold}
  }
  ${lt} {
    display: block;
    path {
      fill: ${o.colors.primary600}
    };
  }
`;const ht=(()=>window&&window.strapi&&window.strapi.isEE?t(68464).Z:t(35123).Z)(),Et=(o,n)=>`
  ${yt} {
    background-color: ${o.colors.primary100};
    color: ${o.colors.primary600};
    border-radius: ${n?"2px 2px 0 0":"2px"};
  }
  ${Lt} {
    display: flex;
  }
  ${Ge} {
    display: block;
  }
  &:hover {
   ${rt(o)}
  }

  &:focus-within {
    ${a=>{let{theme:s,isActive:l}=a;return Et(s,l)}}
  }
  
`,yt=R.default.div.withConfig({displayName:"Collapse__Wrapper",componentId:"sc-132fji1-0"})(["flex:1;display:flex;align-items:center;height:",";background-color:",";border:1px solid transparent;"],Ee,o=>{let{isGrey:n,theme:a}=o;return n?a.colors.neutral100:a.colors.neutral0}),Kt=R.default.div.withConfig({displayName:"Collapse__BoxWrapper",componentId:"sc-132fji1-1"})(["display:inline-flex;min-width:100%;","{display:none;}"," &:hover{","}"],Ge,o=>{let{isActive:n,theme:a}=o;return n&&Et(a,n)},o=>{let{theme:n,isActive:a}=o;return Et(n,a)}),ut=(0,R.default)(I.k).withConfig({displayName:"Collapse__Cell",componentId:"sc-132fji1-2"})(["width:",";position:relative;"],Z),Lt=(0,R.default)(x.x).withConfig({displayName:"Collapse__Chevron",componentId:"sc-132fji1-3"})(["display:none;svg{width:11px;}*{fill:",";}"],o=>{let{theme:n}=o;return n.colors.primary600}),Xt=R.default.span.withConfig({displayName:"Collapse__TinyDot",componentId:"sc-132fji1-4"})(["position:absolute;top:-6px;left:37px;width:6px;height:6px;border-radius:20px;background:",";"],o=>{let{theme:n}=o;return n.colors.primary600}),Qt=(0,R.default)(x.x).withConfig({displayName:"Collapse__AbsoluteBox",componentId:"sc-132fji1-5"})(["position:absolute;right:9px;transform:translateY(10px);"]),mt=o=>{let{availableActions:n,isActive:a,isGrey:s,isFormDisabled:l,label:r,onClickToggle:d,pathToData:c}=o;const[f,y]=(0,e.useState)(!1),{formatMessage:C}=(0,V.useIntl)(),{modifiedData:T,onChangeParentCheckbox:D,onChangeSimpleCheckbox:J}=(0,de.$_)(),N=()=>{y(Se=>!Se)},k=()=>{y(!1)},b=Q()(T,c.split(".."),{}),F=(0,e.useMemo)(()=>Object.keys(b).reduce((Se,ge)=>(Se[ge]=p()(b[ge],"conditions"),Se),{}),[b]),{hasAllActionsSelected:z,hasSomeActionsSelected:H}=st(F),oe=(0,e.useMemo)(()=>Vt(n,T,c),[n,T,c]),Fe=oe.some(Se=>{let{hasConditions:ge}=Se;return ge});return e.createElement(Kt,{isActive:a},e.createElement(yt,{isGrey:s},e.createElement(Tt,{isCollapsable:!0,isFormDisabled:l,label:r,checkboxName:c,onChange:D,onClick:d,someChecked:H,value:z,isActive:a},e.createElement(Lt,{paddingLeft:2},a?e.createElement(W.Z,null):e.createElement(Be.Z,null))),e.createElement(I.k,{style:{flex:1}},oe.map(Se=>{let{actionId:ge,hasConditions:Re,hasAllActionsSelected:Le,hasSomeActionsSelected:we,isDisplayed:_e,isParentCheckbox:et,checkboxName:Ue,label:gt}=Se;return _e?et?e.createElement(ut,{key:ge,justifyContent:"center",alignItems:"center"},Re&&e.createElement(Xt,null),e.createElement(se.C,{disabled:l||ht,name:Ue,"aria-label":C({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:`${gt} ${r}`}),onValueChange:ct=>{D({target:{name:Ue,value:ct}})},indeterminate:we,value:Le})):e.createElement(ut,{key:ge,justifyContent:"center",alignItems:"center"},Re&&e.createElement(Xt,null),e.createElement(se.C,{disabled:l||ht,indeterminate:Re,name:Ue,onValueChange:ct=>{J({target:{name:Ue,value:ct}})},value:Le})):e.createElement(Ve,{key:ge})})),f&&e.createElement(ne,{headerBreadCrumbs:[r,"Settings.permissions.conditions.conditions"],actions:oe,isFormDisabled:l,onClosed:k,onToggle:N})),e.createElement(Qt,null,e.createElement(Ge,{onClick:N,hasConditions:Fe})))};mt.propTypes={availableActions:i().array.isRequired,isActive:i().bool.isRequired,isGrey:i().bool.isRequired,isFormDisabled:i().bool.isRequired,label:i().string.isRequired,onClickToggle:i().func.isRequired,pathToData:i().string.isRequired};var Dt=mt,Rn=(o,n)=>o.map(a=>{const s=Array.isArray(a.applyToProperties)&&a.applyToProperties.indexOf(n)!==-1&&a.isDisplayed;return{label:a.label,actionId:a.actionId,isActionRelatedToCurrentProperty:s}});const Pt=(0,R.default)(I.k)`
  width: ${Z};
  flex-shrink: 0;
`,Yt=(0,R.default)(I.k)`
  width: ${Ce};
  height: ${Ee};
  flex-shrink: 0;
`,Ot=({headers:o,label:n})=>{const{formatMessage:a}=(0,V.useIntl)(),s=a({id:"Settings.roles.form.permission.property-label",defaultMessage:"{label} permissions"},{label:n});return e.createElement(I.k,null,e.createElement(Yt,{alignItems:"center",paddingLeft:6},e.createElement(ie.Z,{variant:"sigma",textColor:"neutral500"},s)),o.map(l=>l.isActionRelatedToCurrentProperty?e.createElement(Pt,{justifyContent:"center",key:l.label},e.createElement(ie.Z,{variant:"sigma",textColor:"neutral500"},a({id:`Settings.roles.form.permissions.${l.label.toLowerCase()}`,defaultMessage:l.label}))):e.createElement(Pt,{key:l.label})))};Ot.propTypes={headers:i().arrayOf(i().shape({label:i().string.isRequired,isActionRelatedToCurrentProperty:i().bool.isRequired})).isRequired,label:i().string.isRequired};var bn=Ot;const Jt=R.default.span`
  color: ${({theme:o})=>o.colors.danger700};
  padding-left: ${({theme:o})=>o.spaces[1]}px;
`;var Bt=()=>e.createElement(Jt,null,"*"),qt=(o,n)=>o.map(a=>{const s=Array.isArray(a.subjects)&&a.subjects.indexOf(n)!==-1;return{...a,isDisplayed:s}}),An=t(41925);const Nt=(0,R.default)(x.x)`
  transform: translate(-4px, -12px);

  &:before {
    content: '';
    width: ${4/16}rem;
    height: ${12/16}rem;
    background: ${({theme:o})=>o.colors.primary200};
    display: block;
  }
`,_t=R.default.svg`
  position: relative;
  flex-shrink: 0;
  transform: translate(-0.5px, -1px);

  * {
    fill: ${({theme:o,color:n})=>o.colors[n]};
  }
`,Ct=o=>e.createElement(Nt,null,e.createElement(_t,{width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",...o},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.02477 14.7513C8.65865 17.0594 11.6046 18.6059 17.5596 18.8856C18.6836 18.9384 19.5976 19.8435 19.5976 20.9688V20.9688C19.5976 22.0941 18.6841 23.0125 17.5599 22.9643C10.9409 22.6805 6.454 20.9387 3.75496 17.1258C0.937988 13.1464 0.486328 7.39309 0.486328 0.593262H4.50974C4.50974 7.54693 5.06394 11.9813 7.02477 14.7513Z",fill:"#D9D8FF"})));Ct.defaultProps={fill:"primary200"},Ct.propTypes={fill:i().string};var xn=(0,e.memo)(Ct);const $t=(()=>window&&window.strapi&&window.strapi.isEE?t(19665).Z:t(52124).Z)(),en=(0,R.default)(I.k).withConfig({displayName:"SubActionRow__Cell",componentId:"sc-7y8yzq-0"})(["width:",";position:relative;"],Z),tn=(0,R.default)(I.k).withConfig({displayName:"SubActionRow__RowWrapper",componentId:"sc-7y8yzq-1"})(["height:",";"],Ee),nn=(0,R.default)(x.x).withConfig({displayName:"SubActionRow__Wrapper",componentId:"sc-7y8yzq-2"})(["padding-left:","rem;"],31/16),on=(0,R.default)(x.x).withConfig({displayName:"SubActionRow__LeftBorderTimeline",componentId:"sc-7y8yzq-3"})(["border-left:",";"],o=>{let{isVisible:n,theme:a}=o;return n?`4px solid ${a.colors.primary200}`:"4px solid transparent"}),Mn=(0,R.default)(I.k).withConfig({displayName:"SubActionRow__RowStyle",componentId:"sc-7y8yzq-4"})(["padding-left:",";width:","px;"," ",";"],o=>{let{theme:n}=o;return n.spaces[4]},o=>{let{level:n}=o;return 145-n*36},o=>{let{isCollapsable:n,theme:a}=o;return n&&`
      ${lt} {
        display: block;
        color: ${a.colors.neutral100};
      }
      &:hover {
        ${rt(a)}
      }
  `},o=>{let{isActive:n,theme:a}=o;return n&&rt(a)}),an=R.default.div.withConfig({displayName:"SubActionRow__TopTimeline",componentId:"sc-7y8yzq-5"})(["padding-top:",";margin-top:",";width:","rem;background-color:",";border-top-left-radius:2px;border-top-right-radius:2px;"],o=>{let{theme:n}=o;return n.spaces[2]},o=>{let{theme:n}=o;return n.spaces[2]},4/16,o=>{let{theme:n}=o;return n.colors.primary200}),Zt=o=>{let{childrenForm:n,isFormDisabled:a,recursiveLevel:s,pathToDataFromActionRow:l,propertyActions:r,parentName:d,propertyName:c}=o;const{formatMessage:f}=(0,V.useIntl)(),{modifiedData:y,onChangeParentCheckbox:C,onChangeSimpleCheckbox:T}=(0,de.$_)(),[D,J]=(0,e.useState)(null),N=b=>{J(F=>F===b?null:b)},k=(0,e.useMemo)(()=>D?n.find(b=>{let{value:F}=b;return F===D}):null,[D,n]);return e.createElement(nn,null,e.createElement(an,null),n.map((b,F)=>{let{label:z,value:H,required:oe,children:Fe}=b;const Se=F+1<n.length,ge=Array.isArray(Fe),Re=D===H;return e.createElement(on,{key:H,isVisible:Se},e.createElement(tn,null,e.createElement(xn,{color:"primary200"}),e.createElement(I.k,{style:{flex:1}},e.createElement(Mn,{level:s,isActive:Re,isCollapsable:ge},e.createElement(ue,(0,An.Z)({alignItems:"center",isCollapsable:ge},ge&&{onClick:()=>N(H),"aria-expanded":Re,onKeyDown:Le=>{let{key:we}=Le;return(we==="Enter"||we===" ")&&N(H)},tabIndex:0,role:"button"},{title:z}),e.createElement(ie.Z,{ellipsis:!0},ee()(z)),oe&&e.createElement(Bt,null),e.createElement(lt,{$isActive:Re}))),e.createElement(I.k,{style:{flex:1}},r.map(Le=>{let{actionId:we,label:_e,isActionRelatedToCurrentProperty:et}=Le;if(!et)return e.createElement(Ve,{key:we});const Ue=[...l.split(".."),we,"properties",c,...d.split(".."),H],gt=Q()(y,Ue,!1);if(!Fe)return e.createElement(en,{key:_e,justifyContent:"center",alignItems:"center"},e.createElement(se.C,{disabled:a||$t,name:Ue.join(".."),"aria-label":f({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:`${d} ${z} ${_e}`}),onValueChange:bt=>{T({target:{name:Ue.join(".."),value:bt}})},value:gt}));const{hasAllActionsSelected:ct,hasSomeActionsSelected:Rt}=st(gt);return e.createElement(en,{key:_e,justifyContent:"center",alignItems:"center"},e.createElement(se.C,{key:_e,disabled:a||$t,name:Ue.join(".."),"aria-label":f({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:`${d} ${z} ${_e}`}),onValueChange:bt=>{C({target:{name:Ue.join(".."),value:bt}})},value:ct,indeterminate:Rt}))})))),k&&Re&&e.createElement(x.x,{paddingBottom:2},e.createElement(Zt,{isFormDisabled:a,parentName:`${d}..${H}`,pathToDataFromActionRow:l,propertyActions:r,propertyName:c,recursiveLevel:s+1,childrenForm:k.children})))}))};Zt.propTypes={childrenForm:i().array.isRequired,isFormDisabled:i().bool.isRequired,parentName:i().string.isRequired,pathToDataFromActionRow:i().string.isRequired,propertyActions:i().array.isRequired,propertyName:i().string.isRequired,recursiveLevel:i().number.isRequired};var sn=(0,e.memo)(Zt);const jt=o=>o.reduce((a,s)=>(s.isActionRelatedToCurrentProperty&&a.push(s.actionId),a),[]);var Dn=(o,n,a,s,l)=>{const d=jt(o).reduce((c,f)=>{const y=[...a.split(".."),f,"properties",s,l],C=(0,h.get)(n,y,!1);return c[f]=C,c},{});return st(d)};const zt=(()=>window&&window.strapi&&window.strapi.isEE?t(32741).Z:t(18318).Z)(),ln=(0,R.default)(I.k).withConfig({displayName:"ActionRow__Cell",componentId:"sc-4agenc-0"})(["width:",";position:relative;"],Z),rn=(0,R.default)(I.k).withConfig({displayName:"ActionRow__Wrapper",componentId:"sc-4agenc-1"})(["height:",";flex:1;"," ",";"],Ee,o=>{let{isCollapsable:n,theme:a}=o;return n&&`
      ${lt} {
        display: block;
        color: ${a.colors.neutral100};
      }
      &:hover {
        ${rt(a)}
      }
  `},o=>{let{isActive:n,theme:a}=o;return n&&rt(a)}),vt=o=>{let{childrenForm:n,label:a,isFormDisabled:s,name:l,required:r,pathToData:d,propertyActions:c,propertyName:f,isOdd:y}=o;const{formatMessage:C}=(0,V.useIntl)(),[T,D]=(0,e.useState)(null),{modifiedData:J,onChangeCollectionTypeLeftActionRowCheckbox:N,onChangeParentCheckbox:k,onChangeSimpleCheckbox:b}=(0,de.$_)(),F=T===l,z=(0,e.useMemo)(()=>Array.isArray(n)?n:[],[n]),H=z.length>0,oe=(0,e.useCallback)(()=>{H&&D(Re=>Re===l?null:l)},[H,l]),Fe=Re=>{let{target:{value:Le}}=Re;N(d,f,l,Le)},{hasAllActionsSelected:Se,hasSomeActionsSelected:ge}=(0,e.useMemo)(()=>Dn(c,J,d,f,l),[c,J,d,f,l]);return e.createElement(e.Fragment,null,e.createElement(rn,{alignItems:"center",isCollapsable:H,isActive:F,background:y?"neutral100":"neutral0"},e.createElement(I.k,null,e.createElement(Tt,{onChange:Fe,onClick:oe,isCollapsable:H,isFormDisabled:s,label:a,someChecked:ge,value:Se,isActive:F},r&&e.createElement(Bt,null),e.createElement(lt,{$isActive:F})),e.createElement(I.k,null,c.map(Re=>{let{label:Le,isActionRelatedToCurrentProperty:we,actionId:_e}=Re;if(!we)return e.createElement(Ve,{key:Le});const et=[...d.split(".."),_e,"properties",f,l];if(!H){const Rt=Q()(J,et,!1);return e.createElement(ln,{key:_e,justifyContent:"center",alignItems:"center"},e.createElement(se.C,{disabled:s||zt,name:et.join(".."),"aria-label":C({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:`${l} ${Le}`}),onValueChange:bt=>{b({target:{name:et.join(".."),value:bt}})},value:Rt}))}const Ue=Q()(J,et,{}),{hasAllActionsSelected:gt,hasSomeActionsSelected:ct}=st(Ue);return e.createElement(ln,{key:Le,justifyContent:"center",alignItems:"center"},e.createElement(se.C,{disabled:s||zt,name:et.join(".."),onValueChange:Rt=>{k({target:{name:et.join(".."),value:Rt}})},"aria-label":C({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:`${l} ${Le}`}),value:gt,indeterminate:ct}))})))),F&&e.createElement(sn,{childrenForm:z,isFormDisabled:s,parentName:l,pathToDataFromActionRow:d,propertyName:f,propertyActions:c,recursiveLevel:0}))};vt.defaultProps={childrenForm:[],required:!1},vt.propTypes={childrenForm:i().array,label:i().string.isRequired,isFormDisabled:i().bool.isRequired,name:i().string.isRequired,pathToData:i().string.isRequired,propertyActions:i().array.isRequired,propertyName:i().string.isRequired,required:i().bool,isOdd:i().bool.isRequired};var dn=(0,e.memo)(vt);const cn=R.default.div`
  display: inline-flex;
  flex-direction: column;
  min-width: 0;
`,Ut=({availableActions:o,childrenForm:n,isFormDisabled:a,label:s,pathToData:l,propertyName:r})=>{const d=(0,e.useMemo)(()=>Rn(o,r),[o,r]);return e.createElement(cn,null,e.createElement(bn,{label:s,headers:d}),e.createElement(x.x,null,n.map(({children:c,label:f,value:y,required:C},T)=>e.createElement(dn,{childrenForm:c,key:y,label:f,isFormDisabled:a,name:y,required:C,propertyActions:d,pathToData:l,propertyName:r,isOdd:T%2===0}))))};Ut.propTypes={childrenForm:i().array.isRequired,availableActions:i().array.isRequired,isFormDisabled:i().bool.isRequired,label:i().string.isRequired,pathToData:i().string.isRequired,propertyName:i().string.isRequired};var un=Ut;const Wt=R.default.div`
  flex-direction: column;
  display: inline-flex;
  min-width: 100%;
  ${({theme:o,isActive:n})=>n&&`border: 1px solid ${o.colors.primary600};`}
`,Gt=({allActions:o,contentTypeName:n,label:a,index:s,isActive:l,isFormDisabled:r,onClickToggleCollapse:d,pathToData:c,properties:f})=>{const y=(0,e.useCallback)(()=>{d(n)},[n,d]),C=(0,e.useMemo)(()=>qt(o,n),[o,n]);return e.createElement(Wt,{isActive:l},e.createElement(Dt,{availableActions:C,isActive:l,isGrey:s%2===0,isFormDisabled:r,label:a,onClickToggle:y,pathToData:c}),l&&f.map(({label:T,value:D,children:J})=>e.createElement(un,{availableActions:C,childrenForm:J,isFormDisabled:r,label:T,pathToData:c,propertyName:D,key:D})))};Gt.propTypes={allActions:i().array.isRequired,contentTypeName:i().string.isRequired,index:i().number.isRequired,isActive:i().bool.isRequired,isFormDisabled:i().bool.isRequired,label:i().string.isRequired,onClickToggleCollapse:i().func.isRequired,pathToData:i().string.isRequired,properties:i().array.isRequired};var kt=Gt;const St=({actions:o,isFormDisabled:n,pathToData:a,subjects:s})=>{const[l,r]=(0,e.useState)(null),d=c=>{r(l===c?null:c)};return s.map(({uid:c,label:f,properties:y},C)=>e.createElement(kt,{allActions:o,key:c,contentTypeName:c,label:f,isActive:l===c,isFormDisabled:n,index:C,onClickToggleCollapse:d,pathToData:`${a}..${c}`,properties:y}))};St.defaultProps={actions:[],subjects:[]},St.propTypes={actions:i().array.isRequired,isFormDisabled:i().bool.isRequired,pathToData:i().string.isRequired,subjects:i().arrayOf(i().shape({uid:i().string.isRequired,label:i().string.isRequired,properties:i().array.isRequired}))};var m=(0,e.memo)(St),u=t(27677),E=o=>o.filter(({subjects:n})=>n&&n.length);const P=o=>o.map(({actionId:n})=>n),O=(o,n)=>o.reduce((a,s)=>(Object.keys(n).forEach(l=>{const r=(0,h.get)(n,[l,s],{}),d={[l]:ft(r)};a[s]?a[s]={...a[s],...d}:a[s]=d}),a),{});var w=(o,n)=>{const a=P(o),s=O(a,n);return Object.keys(s).reduce((r,d)=>(r[d]=st(s[d]),r),{})};const pe=(()=>window&&window.strapi&&window.strapi.isEE?t(36950).Z:t(61526).Z)(),Y=(0,R.default)(u.K).withConfig({displayName:"GlobalActions__CenteredStack",componentId:"sc-1vxwsjr-0"})(["align-items:center;justify-content:center;width:",";flex-shrink:0;"],Z),me=o=>{let{actions:n,isFormDisabled:a,kind:s}=o;const{formatMessage:l}=(0,V.useIntl)(),{modifiedData:r,onChangeCollectionTypeGlobalActionCheckbox:d}=(0,de.$_)(),c=(0,e.useMemo)(()=>E(n),[n]),f=(0,e.useMemo)(()=>w(c,r[s]),[r,c,s]);return e.createElement(x.x,{paddingBottom:4,paddingTop:6,style:{paddingLeft:Ce}},e.createElement(u.K,{horizontal:!0,spacing:0},c.map(y=>{let{label:C,actionId:T}=y;return e.createElement(Y,{key:T,spacing:3},e.createElement(ie.Z,{variant:"sigma",textColor:"neutral500"},l({id:`Settings.roles.form.permissions.${C.toLowerCase()}`,defaultMessage:C})),e.createElement(se.C,{disabled:a||pe,onValueChange:D=>{d(s,T,D)},name:T,"aria-label":l({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:l({id:`Settings.roles.form.permissions.${C.toLowerCase()}`,defaultMessage:C})}),value:Q()(f,[T,"hasAllActionsSelected"],!1),indeterminate:Q()(f,[T,"hasSomeActionsSelected"],!1)}))})))};me.defaultProps={actions:[]},me.propTypes={actions:i().arrayOf(i().shape({label:i().string.isRequired,actionId:i().string.isRequired,subjects:i().array.isRequired})),isFormDisabled:i().bool.isRequired,kind:i().string.isRequired};var K=(0,e.memo)(me);const Oe=(0,R.default)(x.x)`
  overflow-x: auto;
`,ve=({isFormDisabled:o,kind:n,layout:{actions:a,subjects:s}})=>{const l=U()([...s],"label");return e.createElement(Oe,{background:"neutral0"},e.createElement(K,{actions:a,kind:n,isFormDisabled:o}),e.createElement(m,{actions:a,isFormDisabled:o,pathToData:n,subjects:l}))};ve.propTypes={isFormDisabled:i().bool.isRequired,kind:i().string.isRequired,layout:i().shape({actions:i().array,subjects:i().arrayOf(i().shape({uid:i().string.isRequired,label:i().string.isRequired,properties:i().array.isRequired}))}).isRequired};var Ze=(0,e.memo)(ve),Je=t(66694);const qe=({children:o,value:n})=>e.createElement(Je.$l.Provider,{value:n},o);qe.propTypes={children:i().node.isRequired,value:i().exact({availableConditions:i().array.isRequired,modifiedData:i().object.isRequired,onChangeCollectionTypeLeftActionRowCheckbox:i().func.isRequired,onChangeConditions:i().func.isRequired,onChangeSimpleCheckbox:i().func.isRequired,onChangeParentCheckbox:i().func.isRequired,onChangeCollectionTypeGlobalActionCheckbox:i().func.isRequired}).isRequired};var dt=qe,pt=t(83828),mn=t(61762),pn=t(89966),gn=t(15335),Kn=t(5803),In=t(8284),Xn=(o,n,a)=>o.map(s=>{const l=[...a,s.action,"properties","enabled"],r=(0,h.get)(n,l,!1),d=(0,h.get)(n,[...a,s.action,"conditions"],{}),c=it(d).some(f=>f);return{...s,isDisplayed:r,checkboxName:l.join(".."),hasSomeActionsSelected:r,value:r,hasConditions:c,label:s.displayName,actionId:s.action,pathToConditionsObject:[...a,s.action]}}),Qn=o=>{const n=Object.entries(o).reduce((s,l)=>{const[r,{conditions:d}]=l;return s[r]=d,s},{});return it(n).some(s=>s)};const fn=(()=>window&&window.strapi&&window.strapi.isEE?t(96556).Z:t(16437).Z)(),Yn=R.default.div.withConfig({displayName:"SubCategory__Border",componentId:"sc-akgczm-0"})(["flex:1;align-self:center;border-top:1px solid ",";"],o=>{let{theme:n}=o;return n.colors.neutral150}),Jn=R.default.div.withConfig({displayName:"SubCategory__CheckboxWrapper",componentId:"sc-akgczm-1"})(["position:relative;word-break:keep-all;",""],o=>{let{hasConditions:n,disabled:a,theme:s}=o;return n&&`
    &:before {
      content: '';
      position: absolute;
      top: ${-4/16}rem;
      left: ${-8/16}rem;
      width: ${6/16}rem;
      height: ${6/16}rem;
      border-radius: ${20/16}rem;
      background: ${a?s.colors.neutral100:s.colors.primary600};
    }
  `}),Pn=o=>{let{categoryName:n,isFormDisabled:a,subCategoryName:s,actions:l,pathToData:r}=o;const[d,c]=(0,e.useState)(!1),{modifiedData:f,onChangeParentCheckbox:y,onChangeSimpleCheckbox:C}=(0,de.$_)(),{formatMessage:T}=(0,V.useIntl)(),D=Q()(f,r,{}),J=(0,e.useMemo)(()=>Object.keys(D).reduce((oe,Fe)=>(oe[Fe]=ft(D[Fe]),oe),{}),[D]),{hasAllActionsSelected:N,hasSomeActionsSelected:k}=st(J),b=()=>{c(oe=>!oe)},F=()=>{c(!1)},z=Xn(l,f,r),H=Qn(Q()(f,[...r],{}));return e.createElement(e.Fragment,null,e.createElement(x.x,null,e.createElement(I.k,{justifyContent:"space-between",alignItems:"center"},e.createElement(x.x,{paddingRight:4},e.createElement(ie.Z,{variant:"sigma",textColor:"neutral600"},s)),e.createElement(Yn,null),e.createElement(x.x,{paddingLeft:4},e.createElement(In.X,{name:r.join(".."),disabled:a||fn,onValueChange:oe=>{y({target:{name:r.join(".."),value:oe}})},indeterminate:k,value:N},T({id:"app.utils.select-all",defaultMessage:"Select all"})))),e.createElement(I.k,{paddingTop:6,paddingBottom:6},e.createElement(gn.r,{gap:2,style:{flex:1}},z.map(oe=>{let{checkboxName:Fe,value:Se,action:ge,displayName:Re,hasConditions:Le}=oe;return e.createElement(Kn.P,{col:3,key:ge},e.createElement(Jn,{disabled:a||fn,hasConditions:Le},e.createElement(In.X,{name:Fe,disabled:a||fn,onValueChange:we=>{C({target:{name:Fe,value:we}})},value:Se},Re)))})),e.createElement(Ge,{hasConditions:H,onClick:b}))),d&&e.createElement(ne,{headerBreadCrumbs:[n,s],actions:z,isFormDisabled:a,onClosed:F,onToggle:b}))};Pn.propTypes={actions:i().array.isRequired,categoryName:i().string.isRequired,isFormDisabled:i().bool.isRequired,subCategoryName:i().string.isRequired,pathToData:i().array.isRequired};var qn=Pn;const hn=({childrenForm:o,kind:n,name:a,isOpen:s,isFormDisabled:l,isWhite:r,onOpenCategory:d,pathToData:c})=>{const{formatMessage:f}=(0,V.useIntl)(),y=()=>{d(a)},C=(0,e.useMemo)(()=>a.split("::").pop(),[a]);return e.createElement(pt.U,{expanded:s,onToggle:y,id:`accordion-${a}`,variant:r?"primary":"secondary"},e.createElement(mn.B,{title:ee()(C),description:`${f({id:"Settings.permissions.category"},{category:C})} ${n==="plugins"?"plugin":n}`}),e.createElement(pn.v,null,e.createElement(x.x,{padding:6},o.map(({actions:T,subCategoryName:D,subCategoryId:J})=>e.createElement(qn,{key:D,actions:T,categoryName:C,isFormDisabled:l,subCategoryName:D,pathToData:[...c,J]})))))};hn.defaultProps={},hn.propTypes={childrenForm:i().array.isRequired,isOpen:i().bool.isRequired,isFormDisabled:i().bool.isRequired,isWhite:i().bool.isRequired,kind:i().string.isRequired,name:i().string.isRequired,onOpenCategory:i().func.isRequired,pathToData:i().array.isRequired};var _n=hn;const On=({isFormDisabled:o,kind:n,layout:a})=>{const[s,l]=(0,e.useState)(null),r=d=>{l(d===s?null:d)};return e.createElement(x.x,{padding:6,background:"neutral0"},a.map(({category:d,categoryId:c,childrenForm:f},y)=>e.createElement(_n,{key:d,childrenForm:f,kind:n,isFormDisabled:o,isOpen:s===d,isWhite:y%2===1,name:d,onOpenCategory:r,pathToData:[n,c]})))};On.propTypes={isFormDisabled:i().bool.isRequired,kind:i().string.isRequired,layout:i().arrayOf(i().shape({category:i().string.isRequired,categoryId:i().string.isRequired,childrenForm:i().arrayOf(i().shape({actions:i().array.isRequired})).isRequired}).isRequired).isRequired};var Fn=On,Bn=(o,n,a)=>o.find(s=>s.action===n&&s.subject===a);const Nn=(o,n=[])=>o.reduce((a,s)=>(a[s.id]=n.indexOf(s.id)!==-1,a),{}),$n=({children:o},n,a="")=>o.reduce((s,l)=>{if(l.children)return{...s,[l.value]:$n(l,n,`${a}${l.value}.`)};const r=n.indexOf(`${a}${l.value}`)!==-1;return s[l.value]=r,s},{}),eo=(o,n,a)=>o.reduce((s,l)=>{const r=n.properties.find(({value:d})=>d===l);if(r){const d=(0,h.get)(a,["properties",r.value],[]),c=$n(r,d);s.properties[l]=c}return s},{properties:{}}),to=(o,n)=>n.reduce((a,s)=>{const l=o.find(({uid:r})=>r===s)||null;return l&&(a[s]=l),a},{});var Zn=({subjects:o},n,a,s=[])=>n.reduce((l,r)=>{const d=r.subjects,c=to(o,d);if((0,h.isEmpty)(c))return l;const f=Object.keys(c).reduce((y,C)=>{const{actionId:T,applyToProperties:D}=r,k=c[C].properties.map(({value:H})=>H).every(H=>(D||[]).indexOf(H)===-1),b=Bn(s,T,C),F=Nn(a,(0,h.get)(b,"conditions",[]));if((0,h.isEmpty)(D)||k)return(0,h.set)(y,[C,T],{properties:{enabled:b!==void 0},conditions:F}),y;const z=eo(D,c[C],b);return(0,h.set)(y,[C,T],{...z,conditions:F}),y},{});return(0,h.merge)(l,f)},{});const no=(o,n,a)=>o.reduce((s,l)=>{const r=Bn(a,l.action,null);return s[l.action]={properties:{enabled:r!==void 0},conditions:Nn(n,(0,h.get)(r,"conditions",[]))},s},{}),oo=(o,n,a)=>o.reduce((s,l)=>(s[l.subCategoryId]=no(l.actions,n,a),s),{});var jn=(o,n,a=[])=>o.reduce((s,{categoryId:l,childrenForm:r})=>{const d=oo(r,n,a);return s[l]=d,s},{});const zn=o=>o.split(" ").join("-");var Un=(o,n)=>(0,h.chain)(o).groupBy(n).map((a,s)=>({category:s,categoryId:zn(s),childrenForm:(0,h.chain)(a).groupBy("subCategory").map((l,r)=>({subCategoryName:r,subCategoryId:zn(r),actions:l})).value()})).value(),ao=(o,n)=>{const{conditions:a,sections:{collectionTypes:s,singleTypes:l,plugins:r,settings:d}}=o,c={collectionTypes:s,singleTypes:l,plugins:Un(r,"plugin"),settings:Un(d,"category")},f={collectionTypes:Zn(s,s.actions||[],a,n),singleTypes:Zn(l,l.actions||[],a,n),plugins:jn(c.plugins,a,n),settings:jn(c.settings,a,n)};return{initialData:f,modifiedData:f,layouts:c}};const Wn=o=>Object.keys(o).reduce((n,a)=>{const s=o[a];if((0,h.isObject)(s)&&!(0,h.has)(s,"conditions"))return{...n,[a]:Wn(s)};if((0,h.isObject)(s)&&(0,h.has)(s,"conditions")&&!it((0,h.omit)(s,"conditions")).some(r=>r)){const r=Object.keys(s.conditions).reduce((d,c)=>(d[c]=!1,d),{});return{...n,[a]:{...s,conditions:r}}}return n[a]=s,n},{});var En=Wn;const Gn=(o,n)=>Object.keys(o).reduce((a,s)=>{const l=o[s];return s==="conditions"?(a[s]=l,a):(0,h.isObject)(l)?{...a,[s]:Gn(l,n)}:(a[s]=n,a)},{});var Ht=Gn;const so={initialData:{},modifiedData:{},layouts:{}};var io=(o,n)=>(0,ke.default)(o,a=>{switch(n.type){case"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX":{const{collectionTypeKind:s,actionId:l,value:r}=n,d=["modifiedData",s];Object.keys((0,h.get)(o,d)).forEach(c=>{const f=(0,h.get)(o,[...d,c,l],void 0);if(f){let y=Ht(f,r);if(!r&&y.conditions){const C=Ht(y.conditions,!1);y={...y,conditions:C}}(0,h.set)(a,[...d,c,l],y)}});break}case"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX":{const{pathToCollectionType:s,propertyName:l,rowName:r,value:d}=n;let c=(0,h.cloneDeep)(o.modifiedData);const f=s.split(".."),y=(0,h.get)(c,f,{});Object.keys(y).forEach(C=>{if((0,h.has)(y[C],`properties.${l}`)){const T=(0,h.get)(y,[C,"properties",l,r]),D=[...f,C,"properties",l,r];if(!(0,h.isObject)(T))(0,h.set)(c,D,d);else{const J=Ht(T,d);(0,h.set)(c,D,J)}}}),d||(c=En(c)),(0,h.set)(a,"modifiedData",c);break}case"ON_CHANGE_CONDITIONS":{Object.entries(n.conditions).forEach(s=>{const[l,r]=s;(0,h.set)(a,["modifiedData",...l.split(".."),"conditions"],r)});break}case"ON_CHANGE_SIMPLE_CHECKBOX":{let s=(0,h.cloneDeep)(o.modifiedData);(0,h.set)(s,[...n.keys.split("..")],n.value),n.value||(s=En(s)),(0,h.set)(a,"modifiedData",s);break}case"ON_CHANGE_TOGGLE_PARENT_CHECKBOX":{const{keys:s,value:l}=n,r=[...s.split("..")];let d=(0,h.cloneDeep)(o.modifiedData);const c=(0,h.get)(d,r,{}),f=Ht(c,l);(0,h.set)(d,r,f),l||(d=En(d)),(0,h.set)(a,["modifiedData"],d);break}case"RESET_FORM":{a.modifiedData=o.initialData;break}case"SET_FORM_AFTER_SUBMIT":{a.initialData=o.modifiedData;break}default:return a}});const yn=o=>Object.entries(o).filter(([,n])=>n).map(([n])=>n),lo=o=>{const[n,{conditions:a}]=o;return{action:n,subject:null,conditions:yn(a),properties:{}}},ro=o=>Object.values(o).reduce((n,a)=>{const s=Object.entries(a).reduce((l,r)=>{const[,{properties:{enabled:d}}]=r;if(!d)return l;const c=lo(r);return l.push(c),l},[]);return[...n,...s]},[]);var kn=o=>Object.values(o).reduce((n,a)=>{const s=ro(a);return[...n,...s]},[]);const Hn=(o,n="")=>Object.entries(o).reduce((a,s)=>{const[l,r]=s;return(0,h.isObject)(r)?[...a,...Hn(r,`${n}${l}.`)]:(r&&!(0,h.isObject)(r)&&a.push(`${n}${l}`),a)},[]),co=(o,n,{conditions:a,properties:s})=>Object.entries(s).reduce((l,r)=>{const[d,c]=r;return l.properties[d]=Hn(c),l},{action:o,subject:n,conditions:yn(a),properties:{}}),uo=(o,n,{conditions:a})=>({action:o,subject:n,properties:{},conditions:yn(a)}),mo=(o,n)=>Object.entries(n).reduce((s,l)=>{const[r,d]=l;if(!it(d).some(y=>y))return s;if(!(0,h.has)(d,"properties.enabled")){const y=co(r,o,d);return[...s,y]}if(!d.properties.enabled)return s;const f=uo(r,o,d);return s.push(f),s},[]);var Vn=o=>Object.entries(o).reduce((a,s)=>{const[l,r]=s,d=mo(l,r);return[...a,...d]},[]),po=o=>{const n=kn(o.plugins),a=kn(o.settings),s=Vn(o.collectionTypes),l=Vn(o.singleTypes);return[...n,...a,...s,...l]},go=[{labelId:"app.components.LeftMenuLinkContainer.collectionTypes",defaultMessage:"Collection Types",id:"collectionTypes"},{labelId:"app.components.LeftMenuLinkContainer.singleTypes",id:"singleTypes",defaultMessage:"Single Types"},{labelId:"app.components.LeftMenuLinkContainer.plugins",defaultMessage:"Plugins",id:"plugins"},{labelId:"app.components.LeftMenuLinkContainer.settings",defaultMessage:"Settings",id:"settings"}];const Cn=(0,e.forwardRef)(({layout:o,isFormDisabled:n,permissions:a},s)=>{const[{initialData:l,layouts:r,modifiedData:d},c]=(0,e.useReducer)(io,so,()=>ao(o,a)),{formatMessage:f}=(0,V.useIntl)();(0,e.useImperativeHandle)(s,()=>({getPermissions(){const N=(0,re.difference)(l.collectionTypes,d.collectionTypes),k=(0,re.difference)(l.singleTypes,d.singleTypes),b={...N,...k};let F;return Ke()(b)?F=!1:F=Object.values(b).some(z=>Object.values(z).some(H=>De()(H,"conditions"))),{permissionsToSend:po(d),didUpdateConditions:F}},resetForm(){c({type:"RESET_FORM"})},setFormAfterSubmit(){c({type:"SET_FORM_AFTER_SUBMIT"})}}));const y=(N,k,b,F)=>{c({type:"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX",pathToCollectionType:N,propertyName:k,rowName:b,value:F})},C=(N,k,b)=>{c({type:"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX",collectionTypeKind:N,actionId:k,value:b})},T=N=>{c({type:"ON_CHANGE_CONDITIONS",conditions:N})},D=(0,e.useCallback)(({target:{name:N,value:k}})=>{c({type:"ON_CHANGE_SIMPLE_CHECKBOX",keys:N,value:k})},[]),J=(0,e.useCallback)(({target:{name:N,value:k}})=>{c({type:"ON_CHANGE_TOGGLE_PARENT_CHECKBOX",keys:N,value:k})},[]);return e.createElement(dt,{value:{availableConditions:o.conditions,modifiedData:d,onChangeConditions:T,onChangeSimpleCheckbox:D,onChangeParentCheckbox:J,onChangeCollectionTypeLeftActionRowCheckbox:y,onChangeCollectionTypeGlobalActionCheckbox:C}},e.createElement(X.v,{id:"tabs",label:f({id:"Settings.permissions.users.tabs.label",defaultMessage:"Tabs Permissions"})},e.createElement(je.m,null,go.map(N=>e.createElement(je.O,{key:N.id},f({id:N.labelId,defaultMessage:N.defaultMessage})))),e.createElement(ae.n,{style:{position:"relative"}},e.createElement(ae.x,null,e.createElement(Ze,{layout:r.collectionTypes,kind:"collectionTypes",isFormDisabled:n})),e.createElement(ae.x,null,e.createElement(Ze,{layout:r.singleTypes,kind:"singleTypes",isFormDisabled:n})),e.createElement(ae.x,null,e.createElement(Fn,{layout:r.plugins,kind:"plugins",isFormDisabled:n})),e.createElement(ae.x,null,e.createElement(Fn,{layout:r.settings,kind:"settings",isFormDisabled:n})))))});Cn.defaultProps={permissions:[],layout:{conditions:[],sections:{collectionTypes:{},singleTypes:{actions:[]},settings:[],plugins:[]}}},Cn.propTypes={layout:i().object,isFormDisabled:i().bool.isRequired,permissions:i().array};var fo=(0,e.memo)(Cn)},16437:function(_,v){v.Z=!0},78522:function(_,v){v.Z=()=>"todo empty role"},80779:function(_,v,t){var e=t(32735),S=t(60216),i=t.n(S),re=t(72850),X=t(87933),je=t(29005),ae=t(66735),be=t(49372),De=t(50563),Te=t(88425),Ke=t.n(Te),V=t(5636);const x=({id:R,name:ye,description:U,usersCount:Be,icons:W,rowIndex:se})=>{const{formatMessage:I}=(0,V.useIntl)(),Ne=I({id:"Roles.RoleRow.user-count",defaultMessage:"{number, plural, =0 {#  user} one {#  user} other {# users}}"},{number:Be});return e.createElement(je.Tr,{"aria-rowindex":se,key:R,...(0,Te.onRowClick)({fn:W[1].onClick})},e.createElement(ae.Td,{maxWidth:(0,Te.pxToRem)(130)},e.createElement(be.Z,{ellipsis:!0,textColor:"neutral800"},ye)),e.createElement(ae.Td,{maxWidth:(0,Te.pxToRem)(250)},e.createElement(be.Z,{ellipsis:!0,textColor:"neutral800"},U)),e.createElement(ae.Td,null,e.createElement(be.Z,{textColor:"neutral800"},Ne)),e.createElement(ae.Td,null,e.createElement(X.k,{justifyContent:"flex-end",...Te.stopPropagation},W.map((Q,$e)=>Q?e.createElement(re.x,{key:Q.label,paddingLeft:$e===0?0:1},e.createElement(De.h,{onClick:Q.onClick,label:Q.label,noBorder:!0,icon:Q.icon})):null))))};x.propTypes={id:i().number.isRequired,name:i().string.isRequired,description:i().string.isRequired,usersCount:i().number.isRequired,icons:i().array.isRequired,rowIndex:i().number.isRequired},v.Z=x},45677:function(_,v,t){t.d(v,{Z:function(){return He}});var e=t(32735),S=t(88425),i=t(72041),re=t(58469),X=t(19406),je=t(4038),ae=t(68625),be=t(47765),De=t(41415),Te=t(28356),Ke=t(17e3),V=t(94745),x=t(73269),R=t(76330),ye=t(29005),U=t(66735),Be=t(3594),W=t(49372),se=t(27649),I=t(3685),Ne=t(5636),Q=t(5141),$e=t(80779),p=t(78522),de=t(60216),Ae=t.n(de),xe=t(83292),We=t(71933),Xe=t(67563),Ge=t(50563),Qe=t(95489),tt=t(72850),nt=t(87933),ot=t(27677),q=t(47361),ie=t(35331),ke=t.p+"6d21938306785f176538.png",M=t.p+"617f9c948fa79e6d73bd.png";const fe=xe.default.div`
  position: absolute;
  z-index: 3;
  inset: 0;
  background: ${({theme:A})=>(0,S.setHexOpacity)(A.colors.neutral800,.2)};
  padding: 0 ${({theme:A})=>A.spaces[8]};
`,$=(0,xe.default)(nt.k)`
  position: relative;
  max-width: ${830/16}rem;
  height: ${415/16}rem;
  margin: 0 auto;
  overflow: hidden;
  margin-top: 10%;
  padding-left: ${64/16}rem;

  img:first-of-type {
    position: absolute;
    right: 0;
    top: 0;
    max-width: ${360/16}rem;
  }

  img:not(:first-of-type) {
    width: ${130/16}rem;
    margin-left: 12%;
    margin-right: ${20/16}rem;
    z-index: 0;
  }
`,ee=(0,xe.default)(ot.K)`
  align-items: flex-start;
  max-width: ${400/16}rem;
  z-index: 0;
`,ce=(0,xe.default)(tt.x)`
  position: absolute;
  right: ${({theme:A})=>A.spaces[4]};
  top: ${({theme:A})=>A.spaces[4]};
`,te=({onClose:A,isOpen:B})=>{(0,S.useLockScroll)(B);const{formatMessage:j}=(0,Ne.useIntl)();return B?e.createElement(We.h,null,e.createElement(fe,{onClick:A},e.createElement(Xe.i,{onEscape:A},e.createElement($,{onClick:ne=>ne.stopPropagation(),"aria-labelledby":"upgrade-plan",background:"neutral0",hasRadius:!0},e.createElement("img",{src:ke,alt:"air-balloon"}),e.createElement(ce,null,e.createElement(Ge.h,{onClick:A,"aria-label":"Close",icon:e.createElement(ie.default,null)})),e.createElement(ee,{spacing:6},e.createElement(W.Z,{fontWeight:"bold",textColor:"primary600"},j({id:"app.components.UpgradePlanModal.text-ce",defaultMessage:"COMMUNITY EDITION"})),e.createElement(ot.K,{spacing:2},e.createElement(W.Z,{variant:"alpha",as:"h2",id:"upgrade-plan"},j({id:"app.components.UpgradePlanModal.limit-reached",defaultMessage:"You have reached the limit"})),e.createElement(W.Z,null,j({id:"app.components.UpgradePlanModal.text-power",defaultMessage:"Unlock the full power of Strapi by upgrading your plan to the Enterprise Edition"}))),e.createElement(Qe.Q,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement(q.Z,null)},j({id:"app.components.UpgradePlanModal.button",defaultMessage:"Learn more"}))),e.createElement("img",{src:M,alt:"upgrade-arrow"}))))):null};te.propTypes={onClose:Ae().func.isRequired,isOpen:Ae().bool.isRequired};var Ie=te,Me=t(8888);const le=()=>{const{roles:A,isLoading:B}=(0,Me.bF)(),j=(0,S.useQuery)(),ne=decodeURIComponent(j.get("_q")||""),Z=(0,re.ZP)(A,ne,{keys:["name","description"]});return{isLoading:B,sortedRoles:Z}},he=()=>{const{formatMessage:A}=(0,Ne.useIntl)(),[B,j]=(0,e.useState)(!1),{trackUsage:ne}=(0,S.useTracking)(),{push:Z}=(0,Q.useHistory)(),Ce=(0,e.useCallback)(L=>{Z(`/settings/roles/${L}`)},[Z]),Ee=(0,e.useCallback)(()=>{j(L=>!L)},[]),Ye=(0,e.useCallback)(()=>{ne("didShowRBACUpgradeModal"),j(!0)},[ne]),Ve=(0,e.useCallback)(L=>[{onClick:Ee,label:A({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:e.createElement(be.Z,null)},{onClick:()=>Ce(L.id),label:A({id:"app.utils.edit",defaultMessage:"Edit"}),icon:e.createElement(ae.Z,null)},{onClick:Ee,label:A({id:"global.delete",defaultMessage:"Delete"}),icon:e.createElement(je.default,null)}],[A,Ee,Ce]);return{isModalOpen:B,handleToggleModalForCreatingRole:Ye,handleToggle:Ee,getIcons:Ve}};var h=()=>{const{formatMessage:A}=(0,Ne.useIntl)();(0,S.useFocusWhenNavigate)();const{sortedRoles:B,isLoading:j}=le(),{isModalOpen:ne,handleToggle:Z,handleToggleModalForCreatingRole:Ce,getIcons:Ee}=he(),Ye=B.length+1,Ve=5;return e.createElement(se.o,null,e.createElement(S.SettingsPageTitle,{name:"Roles"}),e.createElement(Te.T,{primaryAction:e.createElement(De.z,{onClick:Ce,startIcon:e.createElement(X.default,null),size:"S"},A({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})),title:A({id:"global.roles",defaultMessage:"roles"}),subtitle:A({id:"Settings.roles.list.description",defaultMessage:"List of roles"})}),e.createElement(Ke.D,null,e.createElement(V.i,{colCount:Ve,rowCount:Ye,footer:e.createElement(x.c,{onClick:Ce,icon:e.createElement(X.default,null)},A({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"}))},e.createElement(R.h,null,e.createElement(ye.Tr,null,e.createElement(U.Th,null,e.createElement(W.Z,{variant:"sigma",textColor:"neutral600"},A({id:"global.name",defaultMessage:"Name"}))),e.createElement(U.Th,null,e.createElement(W.Z,{variant:"sigma",textColor:"neutral600"},A({id:"global.description",defaultMessage:"Description"}))),e.createElement(U.Th,null,e.createElement(W.Z,{variant:"sigma",textColor:"neutral600"},A({id:"global.users",defaultMessage:"Users"}))),e.createElement(U.Th,null,e.createElement(I.T,null,A({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(Be.p,null,B?.map((L,ue)=>e.createElement($e.Z,{key:L.id,id:L.id,name:L.name,description:L.description,usersCount:L.usersCount,icons:Ee(L),rowIndex:ue+2})))),!Ye&&!j&&e.createElement(p.Z,null)),e.createElement(Ie,{isOpen:ne,onClose:Z}))},He=()=>e.createElement(S.CheckPagePermissions,{permissions:i.Z.settings.roles.main},e.createElement(h,null))},75936:function(_,v){const t=[];v.Z=t},20178:function(_,v,t){t.d(v,{Z:function(){return ot}});var e=t(32735),S=t(64213),i=t(88425),re=t(72850),X=t(41415),je=t(28356),ae=t(17e3),be=t(15335),De=t(5803),Te=t(27649),Ke=t(87933),V=t(27677),x=t(49372),R=t(10369),ye=t(10508),U=t(29439),Be=t(83281),W=t(33795),se=t.n(W),I=t(86834),Ne=t.n(I),Q=t(5636),$e=t(5141),p=t(83292),de=t(78974),Ae=t(8888),xe=t(72041),We=t(5173),Ge=We.Ry().shape({name:We.Z_().required(i.translatedErrors.required),description:We.Z_().required(i.translatedErrors.required)}),Qe=t(98399);const tt=p.default.div`
  border: 1px solid ${({theme:q})=>q.colors.primary200};
  background: ${({theme:q})=>q.colors.primary100};
  padding: ${({theme:q})=>`${q.spaces[2]} ${q.spaces[4]}`};
  color: ${({theme:q})=>q.colors.primary600};
  border-radius: ${({theme:q})=>q.borderRadius};
  font-size: ${12/16}rem;
  font-weight: bold;
`,nt=()=>{const q=(0,i.useNotification)(),{lockApp:ie,unlockApp:ke}=(0,i.useOverlayBlocker)(),{formatMessage:M}=(0,Q.useIntl)(),[fe,$]=(0,e.useState)(!1),{replace:ee}=(0,$e.useHistory)(),ce=(0,e.useRef)(),{trackUsage:te}=(0,i.useTracking)(),Ie=(0,$e.useRouteMatch)("/settings/roles/duplicate/:id"),Me=se()(Ie,"params.id",null),{isLoading:le,data:he}=(0,Ae.U_)(),{permissions:ze,isLoading:h}=(0,Ae.Dq)(Me),Pe=A=>{ie(),$(!0),te(Me?"willDuplicateRole":"willCreateNewRole"),Promise.resolve((0,i.request)("/admin/roles",{method:"POST",body:A})).then(async B=>{const{permissionsToSend:j}=ce.current.getPermissions();return te(Me?"didDuplicateRole":"didCreateNewRole"),B.data.id&&!Ne()(j)&&await(0,i.request)(`/admin/roles/${B.data.id}/permissions`,{method:"PUT",body:{permissions:j}}),B}).then(B=>{$(!1),q({type:"success",message:{id:"Settings.roles.created",defaultMessage:"created"}}),ee(`/settings/roles/${B.data.id}`)}).catch(B=>{Qe.error(B),$(!1),q({type:"warning",message:{id:"notification.error"}})}).finally(()=>{ke()})},He=`${M({id:"Settings.roles.form.created",defaultMessage:"Created"})} ${(0,S.format)(new Date,"PPP")}`;return e.createElement(Te.o,null,e.createElement(i.SettingsPageTitle,{name:"Roles"}),e.createElement(Be.Formik,{initialValues:{name:"",description:He},onSubmit:Pe,validationSchema:Ge,validateOnChange:!1},({handleSubmit:A,values:B,errors:j,handleReset:ne,handleChange:Z})=>e.createElement(i.Form,{noValidate:!0},e.createElement(e.Fragment,null,e.createElement(je.T,{primaryAction:e.createElement(V.K,{horizontal:!0,spacing:2},e.createElement(X.z,{variant:"secondary",onClick:()=>{ne(),ce.current.resetForm()},size:"L"},M({id:"app.components.Button.reset",defaultMessage:"Reset"})),e.createElement(X.z,{onClick:A,loading:fe,size:"L"},M({id:"global.save",defaultMessage:"Save"}))),title:M({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:M({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"}),navigationAction:e.createElement(i.Link,{startIcon:e.createElement(U.Z,null),to:"/settings/roles"},M({id:"global.back",defaultMessage:"Back"}))}),e.createElement(ae.D,null,e.createElement(V.K,{spacing:6},e.createElement(re.x,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(V.K,{spacing:4},e.createElement(Ke.k,{justifyContent:"space-between"},e.createElement(re.x,null,e.createElement(re.x,null,e.createElement(x.Z,{fontWeight:"bold"},M({id:"global.details",defaultMessage:"Details"}))),e.createElement(re.x,null,e.createElement(x.Z,{variant:"pi",textColor:"neutral600"},M({id:"Settings.roles.form.description",defaultMessage:"Name and description of the role"})))),e.createElement(tt,null,M({id:"Settings.roles.form.button.users-with-role",defaultMessage:"{number, plural, =0 {# users} one {# user} other {# users}} with this role"},{number:0}))),e.createElement(be.r,{gap:4},e.createElement(De.P,{col:6},e.createElement(R.o,{name:"name",error:j.name&&M({id:j.name}),label:M({id:"global.name",defaultMessage:"Name"}),onChange:Z,value:B.name})),e.createElement(De.P,{col:6},e.createElement(ye.g,{label:M({id:"global.description",defaultMessage:"Description"}),name:"description",error:j.description&&M({id:j.description}),onChange:Z},B.description))))),!le&&!h?e.createElement(re.x,{shadow:"filterShadow",hasRadius:!0},e.createElement(de.Z,{isFormDisabled:!1,ref:ce,permissions:ze,layout:he})):e.createElement(re.x,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(i.LoadingIndicatorPage,null))))))))};function ot(){return e.createElement(i.CheckPagePermissions,{permissions:xe.Z.settings.roles.create},e.createElement(nt,null))}},56899:function(_,v){v.Z=!1},68464:function(_,v){v.Z=!1},32741:function(_,v){v.Z=!1},19665:function(_,v){v.Z=!1},36950:function(_,v){v.Z=!1},96556:function(_,v){v.Z=!1},51899:function(_,v,t){t.d(v,{Z:function(){return ke}});var e=t(32735),S=t(88425),i=t(72041),re=t(19406),X=t(4038),je=t(47765),ae=t(68625),be=t(41415),De=t(28356),Te=t(99223),Ke=t(17e3),V=t(3685),x=t(27649),R=t(94745),ye=t(73269),U=t(76330),Be=t(29005),W=t(66735),se=t(3594),I=t(49372),Ne=t(92891),Q=t(58469),$e=t(5636),p=t(5141),de=t(8888),Ae=t(78522),xe=t(80779),We=t(97889);const Xe={roleToDelete:null,showModalConfirmButtonLoading:!1,shouldRefetchData:!1};var Qe=(M,fe)=>(0,We.default)(M,$=>{switch(fe.type){case"ON_REMOVE_ROLES":{$.showModalConfirmButtonLoading=!0;break}case"ON_REMOVE_ROLES_SUCCEEDED":{$.shouldRefetchData=!0,$.roleToDelete=null;break}case"RESET_DATA_TO_DELETE":{$.shouldRefetchData=!1,$.roleToDelete=null,$.showModalConfirmButtonLoading=!1;break}case"SET_ROLE_TO_DELETE":{$.roleToDelete=fe.id;break}default:return $}});const tt=()=>{(0,S.useFocusWhenNavigate)();const{isLoading:M,allowedActions:{canCreate:fe,canDelete:$,canRead:ee,canUpdate:ce}}=(0,S.useRBAC)(i.Z.settings.roles),{getData:te,roles:Ie,isLoading:Me}=(0,de.bF)(!1),[{query:le}]=(0,S.useQueryParams)(),he=le?._q||"",ze=(0,Q.ZP)(Ie,he,{keys:["name","description"]});return(0,e.useEffect)(()=>{!M&&ee&&te()},[M,ee,te]),{isLoadingForPermissions:M,canCreate:fe,canDelete:$,canRead:ee,canUpdate:ce,isLoading:Me,getData:te,sortedRoles:ze,roles:Ie}},nt=({getData:M,canCreate:fe,canDelete:$,canUpdate:ee})=>{const{formatMessage:ce}=(0,$e.useIntl)(),te=(0,S.useNotification)(),[Ie,Me]=(0,e.useState)(!1),{push:le}=(0,p.useHistory)(),[{selectedRoles:he,showModalConfirmButtonLoading:ze,roleToDelete:h},Pe]=(0,e.useReducer)(Qe,Xe),{post:He}=(0,S.getFetchClient)(),A=async()=>{try{Pe({type:"ON_REMOVE_ROLES"}),await He("/admin/roles/batch-delete",{ids:[h]}),await M(),Pe({type:"RESET_DATA_TO_DELETE"})}catch(L){const ue=(0,Ne.get)(L,["response","payload","data","ids"],null);if(ue&&Array.isArray(ue)){const at=ue.join(`
`);te({type:"warning",message:at})}else te({type:"warning",message:{id:"notification.error"}})}Z()},B=(0,e.useCallback)(L=>{le(`/settings/roles/duplicate/${L}`)},[le]),j=()=>le("/settings/roles/new"),ne=(0,e.useCallback)(L=>{Pe({type:"SET_ROLE_TO_DELETE",id:L}),Z()},[]),Z=()=>Me(L=>!L),Ce=(0,e.useCallback)(L=>{le(`/settings/roles/${L}`)},[le]),Ee=(0,e.useCallback)((L,ue)=>{L.preventDefault(),L.stopPropagation(),ue.usersCount?te({type:"info",message:{id:"Roles.ListPage.notification.delete-not-allowed"}}):ne(ue.id)},[te,ne]),Ye=(0,e.useCallback)((L,ue)=>{L.preventDefault(),L.stopPropagation(),B(ue.id)},[B]),Ve=(0,e.useCallback)(L=>[...fe?[{onClick:ue=>Ye(ue,L),label:ce({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:e.createElement(je.Z,null)}]:[],...ee?[{onClick:()=>Ce(L.id),label:ce({id:"app.utils.edit",defaultMessage:"Edit"}),icon:e.createElement(ae.Z,null)}]:[],...$?[{onClick:ue=>Ee(ue,L),label:ce({id:"global.delete",defaultMessage:"Delete"}),icon:e.createElement(X.default,null)}]:[]],[ce,Ee,Ye,Ce,fe,ee,$]);return{handleNewRoleClick:j,getIcons:Ve,selectedRoles:he,isWarningDeleteAllOpened:Ie,showModalConfirmButtonLoading:ze,handleToggleModal:Z,handleDeleteData:A}};var q=()=>{const{formatMessage:M}=(0,$e.useIntl)(),{isLoadingForPermissions:fe,canCreate:$,canRead:ee,canDelete:ce,canUpdate:te,isLoading:Ie,getData:Me,sortedRoles:le}=tt(),{handleNewRoleClick:he,getIcons:ze,isWarningDeleteAllOpened:h,showModalConfirmButtonLoading:Pe,handleToggleModal:He,handleDeleteData:A}=nt({getData:Me,canCreate:$,canDelete:ce,canUpdate:te}),B=le.length+1,j=6;if(fe)return e.createElement(x.o,null,e.createElement(S.LoadingIndicatorPage,null));const ne=M({id:"global.roles",defaultMessage:"roles"});return e.createElement(x.o,null,e.createElement(S.SettingsPageTitle,{name:"Roles"}),e.createElement(De.T,{primaryAction:$?e.createElement(be.z,{onClick:he,startIcon:e.createElement(re.default,null),size:"S"},M({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null,title:ne,subtitle:M({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),as:"h2"}),ee&&e.createElement(Te.Z,{startActions:e.createElement(S.SearchURLQuery,{label:M({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:ne})})}),ee&&e.createElement(Ke.D,null,e.createElement(R.i,{colCount:j,rowCount:B,footer:$?e.createElement(ye.c,{onClick:he,icon:e.createElement(re.default,null)},M({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null},e.createElement(U.h,null,e.createElement(Be.Tr,{"aria-rowindex":1},e.createElement(W.Th,null,e.createElement(I.Z,{variant:"sigma",textColor:"neutral600"},M({id:"global.name",defaultMessage:"Name"}))),e.createElement(W.Th,null,e.createElement(I.Z,{variant:"sigma",textColor:"neutral600"},M({id:"global.description",defaultMessage:"Description"}))),e.createElement(W.Th,null,e.createElement(I.Z,{variant:"sigma",textColor:"neutral600"},M({id:"global.users",defaultMessage:"Users"}))),e.createElement(W.Th,null,e.createElement(V.T,null,M({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(se.p,null,le?.map((Z,Ce)=>e.createElement(xe.Z,{key:Z.id,id:Z.id,name:Z.name,description:Z.description,usersCount:Z.usersCount,icons:ze(Z),rowIndex:Ce+2})))),!B&&!Ie&&e.createElement(Ae.Z,null)),e.createElement(S.ConfirmDialog,{isOpen:h,onConfirm:A,isConfirmButtonLoading:Pe,onToggleDialog:He}))},ke=()=>e.createElement(S.CheckPagePermissions,{permissions:i.Z.settings.roles.main},e.createElement(q,null))},63775:function(_,v,t){const e=[];strapi.features.isEnabled(strapi.features.SSO)&&e.push({async Component(){return await t.e(302).then(t.bind(t,26930))},to:"/settings/single-sign-on",exact:!0}),strapi.features.isEnabled(strapi.features.AUDIT_LOGS)&&e.push({async Component(){return await Promise.all([t.e(2743),t.e(2812)]).then(t.bind(t,71765))},to:"/settings/audit-logs",exact:!0}),v.Z=e}}]);
